<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"><link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"><style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(1)) > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(7) > ul > li:nth-child(3) > ul > li:nth-child(1) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(7) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(7) > ul > li:nth-child(3) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(7) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(7) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list { display: block; }</style><script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico" type="image/x-icon"><title>Kubernetes 실습 환경 | Just the Notes</title><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Kubernetes 실습 환경" /><meta property="og:locale" content="en_US" /><meta name="description" content="Notes for All things" /><meta property="og:description" content="Notes for All things" /><link rel="canonical" href="http://localhost:4000/docs/cloud/k8s-install-lab/" /><meta property="og:url" content="http://localhost:4000/docs/cloud/k8s-install-lab/" /><meta property="og:site_name" content="Just the Notes" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Kubernetes 실습 환경" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Notes for All things","headline":"Kubernetes 실습 환경","url":"http://localhost:4000/docs/cloud/k8s-install-lab/"}</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4875421300871686" crossorigin="anonymous"></script><body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewBox="0 0 16 16"><title>Copy</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"><title>Copied</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg><div class="side-bar"><div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Just the Notes </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button></div><nav aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Network & Security category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/network-security" class="nav-list-link">Network & Security</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/network-security/network-security-nginx/" class="nav-list-link">Nginx 설정</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in OS Systems category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/os-systems" class="nav-list-link">OS Systems</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Linux category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/os-systems/linux/" class="nav-list-link">Linux</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/os-systems/linux-basics/" class="nav-list-link">Linux Basics</a><li class="nav-list-item"> <a href="/docs/os-systems/linux-command/" class="nav-list-link">Linux Command</a><li class="nav-list-item"> <a href="/docs/os-systems/linux-group/" class="nav-list-link">리눅스 그룹 관리</a></ul></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Database category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/database" class="nav-list-link">Database</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/database/database-mysqlbasic/" class="nav-list-link">MySQL 기본</a><li class="nav-list-item"><a href="/docs/database/database-oracleinstall/" class="nav-list-link">우분투에서 Oracle DB 설치</a><li class="nav-list-item"><a href="/docs/database/database-dbeaverinstall/" class="nav-list-link">우분투에서 DBeaver 설치</a><li class="nav-list-item"><a href="/docs/database/database-edgedb/" class="nav-list-link">Edge DB on Windows10</a><li class="nav-list-item"><a href="/docs/database/database-oracle-procedure/" class="nav-list-link">Oracle Proceduer 생성/실행</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Programming Language category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming-language" class="nav-list-link">Programming Language</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/programming-language/html/" class="nav-list-link">HTML</a><li class="nav-list-item"><a href="/docs/programming-language/css/" class="nav-list-link">CSS</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in C, C# category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming-language/c-csharp/" class="nav-list-link">C, C#</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/programming-language/gcc/" class="nav-list-link">gcc 컴파일하기</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Node.js category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming-language/nodejs/" class="nav-list-link">Node.js</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/programming-language/nodejs-basic/" class="nav-list-link">Node.js 기본 개념</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Python category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming-language/python/" class="nav-list-link">Python</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/programming-language/flutter-panabara/" class="nav-list-link">Understanding of Python</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Vue.js category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming-language/vuejs/" class="nav-list-link">Vue.js</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/programming-language/vuejs-basic/" class="nav-list-link">Vue.js 기본 개념</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Flutter category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming-language/flutter/" class="nav-list-link">Flutter</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/programming-language/flutter-basic/" class="nav-list-link">Flutter 기본 개념</a><li class="nav-list-item"> <a href="/docs/programming-language/flutter-example/" class="nav-list-link">Flutter 주요 예제</a><li class="nav-list-item"> <a href="/docs/programming-language/flutter-panabara-pre/" class="nav-list-link">Toy - Panabara 준비</a><li class="nav-list-item"> <a href="/docs/programming-language/flutter-evcharger/" class="nav-list-link">Toy - 전기차충전소 위치찾기</a><li class="nav-list-item"> <a href="/docs/programming-language/flutter-emf/" class="nav-list-link">Toy - 무선국전파노출지수</a><li class="nav-list-item"> <a href="/docs/programming-language/flutter-earth/" class="nav-list-link">Toy - EarthToday</a></ul><li class="nav-list-item"><a href="/docs/programming-language/markdown/" class="nav-list-link">Markdown</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Framework category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/framework" class="nav-list-link">Framework</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Spring category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/framework/spring/" class="nav-list-link">Spring</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/framework/spring-basic/" class="nav-list-link">Spring 기본 개념</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Spring Boot category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/framework/springboot/" class="nav-list-link">Spring Boot</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/framework/spring-reference/" class="nav-list-link">Spring Boot 참조 자료</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Django category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/framework/django/" class="nav-list-link">Django</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/framework/django-project/" class="nav-list-link">Creating Django</a><li class="nav-list-item"> <a href="/docs/framework/django-local/" class="nav-list-link">Djanog on Local</a><li class="nav-list-item"> <a href="/docs/framework/django-aws/" class="nav-list-link">Djanog on AWS EC2</a></ul></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cloud category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/cloud" class="nav-list-link">Cloud</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/cloud/cloud-network/" class="nav-list-link">Cloud Network</a><li class="nav-list-item"><a href="/docs/cloud/cloud-mas/" class="nav-list-link">MAS</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Kubernetes category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/cloud/k8s/" class="nav-list-link">Kubernetes</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/cloud/k8s-install-lab/" class="nav-list-link">Kubernetes 실습 환경</a><li class="nav-list-item"> <a href="/docs/cloud/k8s-archi/" class="nav-list-link">Kubernetes Architecture</a><li class="nav-list-item"> <a href="/docs/cloud/k8s-labelselector/" class="nav-list-link">Label & Selector</a><li class="nav-list-item"> <a href="/docs/cloud/k8s-object-controller/" class="nav-list-link">Object & Controller</a><li class="nav-list-item"> <a href="/docs/cloud/k8s-pod/" class="nav-list-link">Pod</a><li class="nav-list-item"> <a href="/docs/cloud/k8s-service/" class="nav-list-link">Service</a><li class="nav-list-item"> <a href="/docs/cloud/k8s-replicaset/" class="nav-list-link">Replicaset</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Helm Chart category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/cloud/helmchart/" class="nav-list-link">Helm Chart</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/cloud/helmchart-install/" class="nav-list-link">Helm Chart Installation</a><li class="nav-list-item"> <a href="/docs/cloud/helmchart-create/" class="nav-list-link">Helm Chart 생성</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in AWS category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/cloud/aws/" class="nav-list-link">AWS</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/cloud/aws-basic/" class="nav-list-link">AWS Basic</a></ul></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Build & Package category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/buildpackage" class="nav-list-link">Build & Package</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Docker category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/buildpackage/docker/" class="nav-list-link">Docker</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/buildpackage/docker-install-18-04/" class="nav-list-link">Ubuntu 에 Docker 설치</a><li class="nav-list-item"> <a href="/docs/buildpackage/docker-install-image-vb/" class="nav-list-link">가상머신 이미지 가져오기</a><li class="nav-list-item"> <a href="/docs/buildpackage/docker-container-tech/" class="nav-list-link">Container 기반 기술</a><li class="nav-list-item"> <a href="/docs/buildpackage/docker-arch/" class="nav-list-link">Docker Architecture</a><li class="nav-list-item"> <a href="/docs/buildpackage/docker-status/" class="nav-list-link">Docker Status</a><li class="nav-list-item"> <a href="/docs/buildpackage/docker-command/" class="nav-list-link">Docker Command</a><li class="nav-list-item"> <a href="/docs/buildpackage/docker-volume/" class="nav-list-link">Docker Volume</a><li class="nav-list-item"> <a href="/docs/buildpackage/docker-network/" class="nav-list-link">Docker Network</a><li class="nav-list-item"> <a href="/docs/buildpackage/docker-dockerfile/" class="nav-list-link">Dockerfile</a><li class="nav-list-item"> <a href="/docs/buildpackage/docker-imagelayer/" class="nav-list-link">Docker Image Layer</a><li class="nav-list-item"> <a href="/docs/buildpackage/docker-imagelayer/" class="nav-list-link">Docker Login 사용법</a></ul><li class="nav-list-item"><a href="/docs/buildpackage/buildpackage-mavenbasic/" class="nav-list-link">Maven 생성 및 실행</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Devops category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/devops" class="nav-list-link">Devops</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/devops/exercise/" class="nav-list-link">DevOps Exercise</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in CI/CD Tools category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/cicdtools" class="nav-list-link">CI/CD Tools</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Jenkins category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/cicdtools/jenkins/" class="nav-list-link">Jenkins</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/cicdtools/jenkins-checkout/" class="nav-list-link">Credential 변경을 통한 GitScm Clone 하기</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Git & Github category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/cicdtools/gitgithub/" class="nav-list-link">Git & Github</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/cicdtools/gitgithub-gitcli/" class="nav-list-link">Git CLI</a><li class="nav-list-item"> <a href="/docs/cicdtools/gitgithub-command/" class="nav-list-link">Git Command</a><li class="nav-list-item"> <a href="/docs/cicdtools/gitgithub-githublocalremote/" class="nav-list-link">Github 로컬/원격 연동</a><li class="nav-list-item"> <a href="/docs/cicdtools/gitgithub-githubprofile/" class="nav-list-link">Github Profile</a><li class="nav-list-item"> <a href="/docs/cicdtools/gitgithub-githubpagelocal/" class="nav-list-link">Github Page On Local</a><li class="nav-list-item"> <a href="/docs/cicdtools/gitgithub-githubrestapi/" class="nav-list-link">Github Rest API</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Jfrog category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/cicdtools/jfrog/" class="nav-list-link">Jfrog</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/cicdtools/jfrog-document/" class="nav-list-link">Jfrog Document</a><li class="nav-list-item"> <a href="/docs/cicdtools/jfrog-trial/" class="nav-list-link">Jfrog Trial - Cloud</a><li class="nav-list-item"> <a href="/docs/cicdtools/jfrog-triallocal/" class="nav-list-link">Jfrog Trial - Local</a><li class="nav-list-item"> <a href="/docs/cicdtools/jfrog-restapi/" class="nav-list-link">Jfrog Rest API</a><li class="nav-list-item"> <a href="/docs/cicdtools/jfrog-aql/" class="nav-list-link">Jfrog AQL</a><li class="nav-list-item"> <a href="/docs/cicdtools/jfrog-dockerlayer/" class="nav-list-link">Docker Layer Analysis</a><li class="nav-list-item"> <a href="/docs/cicdtools/jfrog-dockerlayer-example/" class="nav-list-link">Docker Layer Analysis 상세 분석</a><li class="nav-list-item"> <a href="/docs/cicdtools/jfrog-setmeuprepo/" class="nav-list-link">Set Me Up for Remote Repository</a><li class="nav-list-item"> <a href="/docs/cicdtools/jfrog-repowithprj/" class="nav-list-link">Repository with Project</a></ul></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Agile category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/agile" class="nav-list-link">Agile</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/agile/agile-jira/" class="nav-list-link">Jira</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in New Technology category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/newtech" class="nav-list-link">New Technology</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in AI category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/New%20Technology/ai/" class="nav-list-link">AI</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/newtech/ai-machinelearning-basic/" class="nav-list-link">Machine Learning Theory</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Blockchain category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/New%20Technology/blockchain/" class="nav-list-link">Blockchain</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/newtech/blockchain-basic/" class="nav-list-link">Blockchain 개요</a><li class="nav-list-item"> <a href="/docs/newtech/blockchain-solidity/" class="nav-list-link">리믹스(Remix) 도구를 이용한 Solidity 이해하기</a><li class="nav-list-item"> <a href="/docs/newtech/blockchain-geth/" class="nav-list-link">geth 설치 및 기본 활용하기</a></ul></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Theoretical category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/theoretical" class="nav-list-link">Theoretical</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/theoretical/theoretical-stats/" class="nav-list-link">통계 분석 기초 용어 정리</a><li class="nav-list-item"><a href="/docs/theoretical/theoretical-5why/" class="nav-list-link">5 Whys 기법</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Book Review category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/book-review" class="nav-list-link">Book Review</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/book-review/book-review-blockchain/" class="nav-list-link">블록체인 무엇인가?</a></ul></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/dmjgr5/dmjgr5.github.io">Just the Notes</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search" role="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Just the Notes" aria-label="Search Just the Notes" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="https://github.com/dmjgr5/dmjgr5.github.io" class="site-button" > Just the Notes on GitHub </a></ul></nav></div><div class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="/docs/cloud">Cloud</a><li class="breadcrumb-nav-list-item"><a href="/docs/cloud/k8s/">Kubernetes</a><li class="breadcrumb-nav-list-item"><span>Kubernetes 실습 환경</span></ol></nav><div id="main-content" class="main-content"><main><h1 class="no_toc" id="kubernetes-실습-환경"> <a href="#kubernetes-실습-환경" class="anchor-heading" aria-labelledby="kubernetes-실습-환경"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Kubernetes 실습 환경</h1><h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents</h2><ol id="markdown-toc"><li><a href="#도커-실습에-사용되었던-컨테이너-이미지-모두-삭제하기" id="markdown-toc-도커-실습에-사용되었던-컨테이너-이미지-모두-삭제하기">도커 실습에 사용되었던 컨테이너, 이미지 모두 삭제하기</a><li><a href="#쿠버네티스-클러스터를-구성하기전-요구사항-확인" id="markdown-toc-쿠버네티스-클러스터를-구성하기전-요구사항-확인">쿠버네티스 클러스터를 구성하기전 요구사항 확인</a><ol><li><a href="#a-compatible-linux-host" id="markdown-toc-a-compatible-linux-host">A compatible Linux host</a><li><a href="#2-gb-or-more-of-ram-per-machine" id="markdown-toc-2-gb-or-more-of-ram-per-machine">2 GB or more of RAM per machine</a><li><a href="#2-cpus-or-more" id="markdown-toc-2-cpus-or-more">2 CPUs or more</a><li><a href="#full-network-connectivity-between-all-machines-in-the-cluster" id="markdown-toc-full-network-connectivity-between-all-machines-in-the-cluster">Full network connectivity between all machines in the cluster</a><li><a href="#unique-hostname-mac-address-and-product_uuid-for-every-node" id="markdown-toc-unique-hostname-mac-address-and-product_uuid-for-every-node">Unique hostname, MAC address, and product_uuid for every node</a></ol><li><a href="#kubelet-의-적절한-동작을-위해서-swap을-사용하지-않는다" id="markdown-toc-kubelet-의-적절한-동작을-위해서-swap을-사용하지-않는다">kubelet 의 적절한 동작을 위해서 swap을 사용하지 않는다.</a><ol><li><a href="#selinux-와-방화벽을-해제한다" id="markdown-toc-selinux-와-방화벽을-해제한다">SELinux 와 방화벽을 해제한다.</a><li><a href="#br_netfilter-모듈을-load하고-관련된-네트워크-파라미터를-설정" id="markdown-toc-br_netfilter-모듈을-load하고-관련된-네트워크-파라미터를-설정">br_netfilter 모듈을 load하고 관련된 네트워크 파라미터를 설정</a></ol><li><a href="#kubeadm-kubelet-and-kubectl-패키지-설치하기" id="markdown-toc-kubeadm-kubelet-and-kubectl-패키지-설치하기">kubeadm, kubelet and kubectl 패키지 설치하기</a><ol><li><a href="#update-the-apt-package-index-and-install-packages-needed-to-use-the-kubernetes-apt-repository" id="markdown-toc-update-the-apt-package-index-and-install-packages-needed-to-use-the-kubernetes-apt-repository">Update the apt package index and install packages needed to use the Kubernetes apt repository:</a><li><a href="#download-the-google-cloud-public-signing-key" id="markdown-toc-download-the-google-cloud-public-signing-key">Download the Google Cloud public signing key:</a><li><a href="#add-the-kubernetes-apt-repository" id="markdown-toc-add-the-kubernetes-apt-repository">Add the Kubernetes apt repository:</a><li><a href="#update-apt-package-index-install-kubelet-kubeadm-and-kubectl-and-pin-their-version" id="markdown-toc-update-apt-package-index-install-kubelet-kubeadm-and-kubectl-and-pin-their-version">Update apt package index, install kubelet, kubeadm and kubectl, and pin their version:</a></ol><li><a href="#configuring-the-kubelet--cgroup" id="markdown-toc-configuring-the-kubelet--cgroup">Configuring the kubelet &amp; cgroup</a><li><a href="#시스템-구성" id="markdown-toc-시스템-구성">시스템 구성</a><li><a href="#worker1-worker2-가상-머신-추가" id="markdown-toc-worker1-worker2-가상-머신-추가">worker1, worker2 가상 머신 추가</a><ol><li><a href="#생성을-위해서-master-가상-머신-종료" id="markdown-toc-생성을-위해서-master-가상-머신-종료">생성을 위해서 master 가상 머신 종료</a><li><a href="#가상-머신-cpu-수-수정" id="markdown-toc-가상-머신-cpu-수-수정">가상 머신 CPU 수 수정</a><li><a href="#worker1-가상-머신-복제" id="markdown-toc-worker1-가상-머신-복제">worker1 가상 머신 복제</a><li><a href="#worker2-가상-머신-복제" id="markdown-toc-worker2-가상-머신-복제">worker2 가상 머신 복제</a><li><a href="#master-가상-머신-구동" id="markdown-toc-master-가상-머신-구동">master 가상 머신 구동</a></ol><li><a href="#natnetwork-port-forwarding-설정" id="markdown-toc-natnetwork-port-forwarding-설정">NatNetwork port-forwarding 설정</a><li><a href="#putty-연결-설정" id="markdown-toc-putty-연결-설정">putty 연결 설정</a><ol><li><a href="#worker1-putty-연결-설정" id="markdown-toc-worker1-putty-연결-설정">worker1 putty 연결 설정</a><li><a href="#worker2-putty-연결-설정" id="markdown-toc-worker2-putty-연결-설정">worker2 putty 연결 설정</a></ol><li><a href="#마스터-노드에서만-실행-kubeadm-init-명령을-통해서-클러스터를-생성한다" id="markdown-toc-마스터-노드에서만-실행-kubeadm-init-명령을-통해서-클러스터를-생성한다">(마스터 노드에서만 실행 )kubeadm init 명령을 통해서 클러스터를 생성한다.</a><ol><li><a href="#kubeadm-init-명령어로-마스터-서버를-만든다" id="markdown-toc-kubeadm-init-명령어로-마스터-서버를-만든다">kubeadm init 명령어로 마스터 서버를 만든다.</a></ol><li><a href="#쿠버네티스-클러스터에-조인하기-위한-명령어-구문을-저장" id="markdown-toc-쿠버네티스-클러스터에-조인하기-위한-명령어-구문을-저장">쿠버네티스 클러스터에 조인하기 위한 명령어 구문을 저장</a><li><a href="#kubeconfig-파일의-위치를-kubeconfig-쉘-변수에-설정" id="markdown-toc-kubeconfig-파일의-위치를-kubeconfig-쉘-변수에-설정">kubeconfig 파일의 위치를 KUBECONFIG 쉘 변수에 설정</a><ol><li><a href="#pod-네트워크-추가-기능-구성" id="markdown-toc-pod-네트워크-추가-기능-구성">Pod 네트워크 추가 기능 구성</a></ol><li><a href="#마스터-노드에서만-실행-클러스터-구성-상태-확인" id="markdown-toc-마스터-노드에서만-실행-클러스터-구성-상태-확인">[마스터 노드에서만 실행] 클러스터 구성 상태 확인</a><li><a href="#마스터-노드에서만-실행-생성한--kubeadm-join-구문이-든-쉘-스크립트를-워커-노드로-복사" id="markdown-toc-마스터-노드에서만-실행-생성한--kubeadm-join-구문이-든-쉘-스크립트를-워커-노드로-복사">[마스터 노드에서만 실행] 생성한 # kubeadm join 구문이 든 쉘 스크립트를 워커 노드로 복사</a><li><a href="#워커-노드에서만-실행-복사된-스크립트를-실행하여-클러스터에-조인" id="markdown-toc-워커-노드에서만-실행-복사된-스크립트를-실행하여-클러스터에-조인">[워커 노드에서만 실행] 복사된 스크립트를 실행하여 클러스터에 조인</a><li><a href="#마스터-노드에서만-실행-클러스터-조인-상태-확인" id="markdown-toc-마스터-노드에서만-실행-클러스터-조인-상태-확인">[마스터 노드에서만 실행] 클러스터 조인 상태 확인</a></ol><hr /><p class="highlight">Kubernetes 실습 환경을 위해 아래와 같이 구성한다.</p><ul><li>master 에 kubeadm, kubelet and kubectl 패키지 설치<li>master 로부터 worker1, worker2 복제하기<li>master 에서 kubectl init 하여 조인구문 생성 및 worker1,2 로 복제<li>worker1,2 에서 조인구문 실행</ul><h2 id="도커-실습에-사용되었던-컨테이너-이미지-모두-삭제하기"> <a href="#도커-실습에-사용되었던-컨테이너-이미지-모두-삭제하기" class="anchor-heading" aria-labelledby="도커-실습에-사용되었던-컨테이너-이미지-모두-삭제하기"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 도커 실습에 사용되었던 컨테이너, 이미지 모두 삭제하기</h2><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@docker1:~# docker container <span class="nb">rm</span> <span class="nt">-f</span> <span class="si">$(</span>docker container ps <span class="nt">-aq</span><span class="si">)</span>
root@docker1:~# docker image prune <span class="nt">-a</span>
</code></pre></div></div><h2 id="쿠버네티스-클러스터를-구성하기전-요구사항-확인"> <a href="#쿠버네티스-클러스터를-구성하기전-요구사항-확인" class="anchor-heading" aria-labelledby="쿠버네티스-클러스터를-구성하기전-요구사항-확인"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 쿠버네티스 클러스터를 구성하기전 요구사항 확인</h2><h3 id="a-compatible-linux-host"> <a href="#a-compatible-linux-host" class="anchor-heading" aria-labelledby="a-compatible-linux-host"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> A compatible Linux host</h3><p>The Kubernetes project provides generic instructions for Linux distributions based on Debian and Red Hat, and those distributions without a package manager.</p><h3 id="2-gb-or-more-of-ram-per-machine"> <a href="#2-gb-or-more-of-ram-per-machine" class="anchor-heading" aria-labelledby="2-gb-or-more-of-ram-per-machine"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2 GB or more of RAM per machine</h3><p>Any less will leave little room for your apps.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@docker1:~# free
              total        used        free      shared  buff/cache   available
Mem:        4039328     1140088     1636088       34088     1263152     2608324
Swap:       2017276           0     2017276
root@docker1:~#
</code></pre></div></div><h3 id="2-cpus-or-more"> <a href="#2-cpus-or-more" class="anchor-heading" aria-labelledby="2-cpus-or-more"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2 CPUs or more</h3><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@docker1:~# lscpu
Architecture:        x86_64
CPU op-mode<span class="o">(</span>s<span class="o">)</span>:      32-bit, 64-bit
Byte Order:          Little Endian
CPU<span class="o">(</span>s<span class="o">)</span>:              1
On-line CPU<span class="o">(</span>s<span class="o">)</span> list: 0
Thread<span class="o">(</span>s<span class="o">)</span> per core:  1
Core<span class="o">(</span>s<span class="o">)</span> per socket:  1
Socket<span class="o">(</span>s<span class="o">)</span>:           1
NUMA node<span class="o">(</span>s<span class="o">)</span>:        1
Vendor ID:           GenuineIntel
CPU family:          6
Model:               140
Model name:          11th Gen Intel<span class="o">(</span>R<span class="o">)</span> Core<span class="o">(</span>TM<span class="o">)</span> i7-1165G7 @ 2.80GHz
Stepping:            1
CPU MHz:             2803.200
BogoMIPS:            5606.40
Hypervisor vendor:   KVM
Virtualization <span class="nb">type</span>: full
L1d cache:           48K
L1i cache:           32K
L2 cache:            1280K
L3 cache:            12288K
NUMA node0 CPU<span class="o">(</span>s<span class="o">)</span>:   0
Flags:               fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc rep_good nopl xtopology nonstop_tsc cpuid tsc_known_freq pni pclmulqdq monitor ssse3 cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt aes xsave avx rdrand hypervisor lahf_lm abm 3dnowprefetch invpcid_single fsgsbase avx2 invpcid rdseed clflushopt md_clear flush_l1d arch_capabilities
root@docker1:~#
</code></pre></div></div><h3 id="full-network-connectivity-between-all-machines-in-the-cluster"> <a href="#full-network-connectivity-between-all-machines-in-the-cluster" class="anchor-heading" aria-labelledby="full-network-connectivity-between-all-machines-in-the-cluster"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Full network connectivity between all machines in the cluster</h3><p>Public or private network is fine.</p><h3 id="unique-hostname-mac-address-and-product_uuid-for-every-node"> <a href="#unique-hostname-mac-address-and-product_uuid-for-every-node" class="anchor-heading" aria-labelledby="unique-hostname-mac-address-and-product_uuid-for-every-node"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Unique hostname, MAC address, and product_uuid for every node</h3><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    - <span class="nb">hostname</span> : <span class="c"># hostname</span>
        <span class="c"># hostnamectl set-hostname master</span>
        <span class="c"># nano /etc/hosts </span>
        .... <span class="o">(</span>맨 아래에 다음 내용 추가 <span class="o">)</span>
        192.168.137.101         master
        192.168.137.102         worker1
        192.168.137.103         worker2

        ctrl+o <span class="o">(</span>저장<span class="o">)</span> <span class="nt">--</span><span class="o">&gt;</span> enter <span class="nt">--</span><span class="o">&gt;</span> ctrl+x <span class="o">(</span>종료<span class="o">)</span>

        <span class="c"># cat /etc/hosts  </span>
        192.168.137.101 master
        192.168.137.102 worker1
        192.168.137.103 worker2

    - MAC address : <span class="c"># ip addr , # ifconfig</span>
    - product_uuid : <span class="c"># cat /sys/class/dmi/id/product_uuid </span>
</code></pre></div></div><h2 id="kubelet-의-적절한-동작을-위해서-swap을-사용하지-않는다"> <a href="#kubelet-의-적절한-동작을-위해서-swap을-사용하지-않는다" class="anchor-heading" aria-labelledby="kubelet-의-적절한-동작을-위해서-swap을-사용하지-않는다"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> kubelet 의 적절한 동작을 위해서 swap을 사용하지 않는다.</h2><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># swapon &amp;&amp; cat /etc/fstab </span>
<span class="c"># swapoff -a &amp;&amp; sed -i '/swap/s/^/#/' /etc/fstab     (stream editor: 일괄 문서 편집기) </span>
</code></pre></div></div><h3 id="selinux-와-방화벽을-해제한다"> <a href="#selinux-와-방화벽을-해제한다" class="anchor-heading" aria-labelledby="selinux-와-방화벽을-해제한다"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SELinux 와 방화벽을 해제한다.</h3><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># setenforce  0  // redhat 계열</span>
<span class="c"># ufw disable  // ubuntu  계열</span>
</code></pre></div></div><h3 id="br_netfilter-모듈을-load하고-관련된-네트워크-파라미터를-설정"> <a href="#br_netfilter-모듈을-load하고-관련된-네트워크-파라미터를-설정" class="anchor-heading" aria-labelledby="br_netfilter-모듈을-load하고-관련된-네트워크-파라미터를-설정"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> br_netfilter 모듈을 load하고 관련된 네트워크 파라미터를 설정</h3><p>Linux 노드의 iptables가 bridged traffic을 정확하게 확인하고 제어 할 수 있도록한다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># cat &lt;&lt;EOF | sudo tee /etc/modules-load.d/k8s.conf</span>
br_netfilter
EOF
<span class="nt">--------------------------------------------------------</span>
<span class="c"># cat &lt;&lt;EOF | sudo tee /etc/sysctl.d/k8s.conf</span>
net.bridge.bridge-nf-call-ip6tables <span class="o">=</span> 1
net.bridge.bridge-nf-call-iptables <span class="o">=</span> 1
EOF
<span class="nt">--------------------------------------------------------</span>
<span class="c"># sysctl --system</span>
</code></pre></div></div><h2 id="kubeadm-kubelet-and-kubectl-패키지-설치하기"> <a href="#kubeadm-kubelet-and-kubectl-패키지-설치하기" class="anchor-heading" aria-labelledby="kubeadm-kubelet-and-kubectl-패키지-설치하기"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> kubeadm, kubelet and kubectl 패키지 설치하기</h2><h3 id="update-the-apt-package-index-and-install-packages-needed-to-use-the-kubernetes-apt-repository"> <a href="#update-the-apt-package-index-and-install-packages-needed-to-use-the-kubernetes-apt-repository" class="anchor-heading" aria-labelledby="update-the-apt-package-index-and-install-packages-needed-to-use-the-kubernetes-apt-repository"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Update the apt package index and install packages needed to use the Kubernetes apt repository:</h3><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c"># apt-get update</span>
    <span class="c"># apt-get install -y apt-transport-https ca-certificates curl</span>

</code></pre></div></div><h3 id="download-the-google-cloud-public-signing-key"> <a href="#download-the-google-cloud-public-signing-key" class="anchor-heading" aria-labelledby="download-the-google-cloud-public-signing-key"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Download the Google Cloud public signing key:</h3><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@docker1:~# curl <span class="nt">-fsSLo</span> /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg

</code></pre></div></div><h3 id="add-the-kubernetes-apt-repository"> <a href="#add-the-kubernetes-apt-repository" class="anchor-heading" aria-labelledby="add-the-kubernetes-apt-repository"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add the Kubernetes apt repository:</h3><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@docker1:~# <span class="nb">echo</span> <span class="s2">"deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main"</span> | <span class="nb">sudo tee</span> /etc/apt/sources.list.d/kubernetes.list
deb <span class="o">[</span>signed-by<span class="o">=</span>/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main
</code></pre></div></div><h3 id="update-apt-package-index-install-kubelet-kubeadm-and-kubectl-and-pin-their-version"> <a href="#update-apt-package-index-install-kubelet-kubeadm-and-kubectl-and-pin-their-version" class="anchor-heading" aria-labelledby="update-apt-package-index-install-kubelet-kubeadm-and-kubectl-and-pin-their-version"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Update apt package index, install kubelet, kubeadm and kubectl, and pin their version:</h3><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># apt-get update</span>
<span class="c"># apt-get install -y kubelet=1.21.0-00 kubeadm=1.21.0-00 kubectl=1.21.0-00</span>
<span class="c"># apt-mark hold kubelet kubeadm kubectl</span>
</code></pre></div></div><h2 id="configuring-the-kubelet--cgroup"> <a href="#configuring-the-kubelet--cgroup" class="anchor-heading" aria-labelledby="configuring-the-kubelet--cgroup"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuring the kubelet &amp; cgroup</h2><p>cgroupfs를 컨테이너 런타임과 kubelet 에 의해서 제어할 수 있도록 구성</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@docker1:~# <span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | sudo tee /etc/docker/daemon.json
&gt; {
&gt;   "exec-opts": ["native.cgroupdriver=systemd"],
&gt;   "log-driver": "json-file",
&gt;   "log-opts": {
&gt;     "max-size": "100m"
&gt;   },
&gt;   "storage-driver": "overlay2"
&gt; }
&gt; EOF
{
  "exec-opts": ["native.cgroupdriver=systemd"],
  "log-driver": "json-file",
  "log-opts": {
    "max-size": "100m"
  },
  "storage-driver": "overlay2"
}
root@docker1:~# cat /etc/docker/daemon.json
{
  "exec-opts": ["native.cgroupdriver=systemd"],
  "log-driver": "json-file",
  "log-opts": {
    "max-size": "100m"
  },
  "storage-driver": "overlay2"
}
</span></code></pre></div></div><h2 id="시스템-구성"> <a href="#시스템-구성" class="anchor-heading" aria-labelledby="시스템-구성"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 시스템 구성</h2><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># systemctl enable docker              (부팅시 자동으로 docker 시작)</span>
<span class="c"># systemctl daemon-reload</span>
<span class="c"># systemctl restart docker</span>

<span class="c"># docker info </span>
</code></pre></div></div><h2 id="worker1-worker2-가상-머신-추가"> <a href="#worker1-worker2-가상-머신-추가" class="anchor-heading" aria-labelledby="worker1-worker2-가상-머신-추가"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> worker1, worker2 가상 머신 추가</h2><h3 id="생성을-위해서-master-가상-머신-종료"> <a href="#생성을-위해서-master-가상-머신-종료" class="anchor-heading" aria-labelledby="생성을-위해서-master-가상-머신-종료"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 생성을 위해서 master 가상 머신 종료</h3><p><code class="language-plaintext highlighter-rouge">root@docker1:~# poweroff</code></p><h3 id="가상-머신-cpu-수-수정"> <a href="#가상-머신-cpu-수-수정" class="anchor-heading" aria-labelledby="가상-머신-cpu-수-수정"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 가상 머신 CPU 수 수정</h3><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Oracle VM VirtualBox  관리자 
master 가상 머신 선택 
    <span class="nt">--</span><span class="o">&gt;</span> <span class="s2">"시스템"</span> 글자를 클릭  
    <span class="nt">--</span><span class="o">&gt;</span> 마더보드/프로세서/가속 중 프로세서 선택 
    <span class="nt">--</span><span class="o">&gt;</span> 프로세서<span class="o">(</span>탭<span class="o">)</span> <span class="nt">--</span><span class="o">&gt;</span> 프로세서 개수 2개로 수정  
    <span class="nt">--</span><span class="o">&gt;</span> 확인 
</code></pre></div></div><h3 id="worker1-가상-머신-복제"> <a href="#worker1-가상-머신-복제" class="anchor-heading" aria-labelledby="worker1-가상-머신-복제"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> worker1 가상 머신 복제</h3><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Oracle VM VirtualBox  관리자 
master 가상 머신 선택 
    <span class="nt">--</span><span class="o">&gt;</span> 우클릭 
    <span class="nt">--</span><span class="o">&gt;</span> 복제 

    이름 : worker1
    MAC 주소 정책 : 모든 네트워크 어댑터의 새 MAC  주소 생성 

    <span class="nt">--</span><span class="o">&gt;</span> 다음 
    <span class="nt">--</span><span class="o">&gt;</span> 복제 방식 <span class="nt">--</span><span class="o">&gt;</span> 완전한 복제 <span class="nt">--</span><span class="o">&gt;</span> 복제 


worker1 가상 머신 선택 
    <span class="nt">--</span><span class="o">&gt;</span> 시작 
    <span class="nt">--</span><span class="o">&gt;</span> 로그인 <span class="nt">--</span><span class="o">&gt;</span>  worker1  / ubuntu 
    <span class="nt">--</span><span class="o">&gt;</span> 바탕화면 <span class="nt">--</span><span class="o">&gt;</span> 우클릭 <span class="nt">--</span><span class="o">&gt;</span> Open Teminal 

    <span class="nv">$ </span>su - root              &lt;<span class="nt">--</span> 관리자 root 로 전환 
    Password : ubuntu 

    <span class="c"># hostnamectl set-hostname  worker1 </span>
    <span class="c"># hostname</span>
    worker1 

    <span class="c"># ip addr </span>
    <span class="c"># nano /etc/netplan/00-installer-config.yaml </span>
    addresses: <span class="o">[</span>192.168.137.101/24]
            <span class="nt">--</span><span class="o">&gt;</span> 192.168.137.102/24

    ctrl+o <span class="o">(</span>저장<span class="o">)</span>  <span class="nt">--</span><span class="o">&gt;</span> enter <span class="nt">--</span><span class="o">&gt;</span> ctrl+x <span class="o">(</span>종료 <span class="o">)</span>

    <span class="c"># netplan apply </span>
    <span class="c"># ip addr </span>
    enp0s3
        inet 192.168.137.102/24
</code></pre></div></div><h3 id="worker2-가상-머신-복제"> <a href="#worker2-가상-머신-복제" class="anchor-heading" aria-labelledby="worker2-가상-머신-복제"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> worker2 가상 머신 복제</h3><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Oracle VM VirtualBox  관리자 
master 가상 머신 선택 
    <span class="nt">--</span><span class="o">&gt;</span> 우클릭 
    <span class="nt">--</span><span class="o">&gt;</span> 복제 

    이름 : worker2
    MAC 주소 정책 : 모든 네트워크 어댑터의 새 MAC  주소 생성 

    <span class="nt">--</span><span class="o">&gt;</span> 다음 
    <span class="nt">--</span><span class="o">&gt;</span> 복제 방식 <span class="nt">--</span><span class="o">&gt;</span> 완전한 복제 <span class="nt">--</span><span class="o">&gt;</span> 복제 


worker2 가상 머신 선택 
    <span class="nt">--</span><span class="o">&gt;</span> 시작 
    <span class="nt">--</span><span class="o">&gt;</span> 로그인 <span class="nt">--</span><span class="o">&gt;</span>  worker1  / ubuntu 
    <span class="nt">--</span><span class="o">&gt;</span> 바탕화면 <span class="nt">--</span><span class="o">&gt;</span> 우클릭 <span class="nt">--</span><span class="o">&gt;</span> Open Teminal 

    <span class="nv">$ </span>su - root 
    Password : ubuntu 

    <span class="c"># hostnamectl set-hostname  worker2 </span>
    <span class="c"># hostname</span>
    worker2

    <span class="c"># ip addr </span>
    <span class="c"># nano /etc/netplan/00-installer-config.yaml </span>
    addresses: <span class="o">[</span>192.168.137.101/24]
            <span class="nt">--</span><span class="o">&gt;</span> 192.168.137.103/24

    ctrl+o <span class="o">(</span>저장<span class="o">)</span> <span class="nt">---</span><span class="o">&gt;</span> enter <span class="nt">---</span><span class="o">&gt;</span> ctrl+x <span class="o">(</span>종료<span class="o">)</span>

    <span class="c"># netplan apply </span>
    <span class="c"># ip addr </span>
    enp0s3
        inet 192.168.137.103/24
</code></pre></div></div><h3 id="master-가상-머신-구동"> <a href="#master-가상-머신-구동" class="anchor-heading" aria-labelledby="master-가상-머신-구동"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> master 가상 머신 구동</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Oracle VM VirtualBox  관리자 
master 가상 머신 선택 
    --&gt; 시작 
</code></pre></div></div><h2 id="natnetwork-port-forwarding-설정"> <a href="#natnetwork-port-forwarding-설정" class="anchor-heading" aria-labelledby="natnetwork-port-forwarding-설정"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> NatNetwork port-forwarding 설정</h2><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Oracle VM VirtualBox  관리자
파일 
    <span class="nt">--</span><span class="o">&gt;</span> 환경설정 
    <span class="nt">--</span><span class="o">&gt;</span> 네트워크 <span class="nt">--</span><span class="o">&gt;</span> NatNetwork <span class="nt">--</span><span class="o">&gt;</span> 톱니바퀴 <span class="o">(</span>설정<span class="o">)</span> <span class="nt">--</span><span class="o">&gt;</span> 포트포워딩
    <span class="nt">--</span><span class="o">&gt;</span> <span class="o">[</span>+]

    이름      프로토콜   호스트IP          호스트 포트      게스트IP            게스트포트
    worker1 TCP      192.168.56.1       102        192.168.137.102     22
    worker2 TCP      192.168.56.1       103        192.168.137.103     22
</code></pre></div></div><h2 id="putty-연결-설정"> <a href="#putty-연결-설정" class="anchor-heading" aria-labelledby="putty-연결-설정"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> putty 연결 설정</h2><h3 id="worker1-putty-연결-설정"> <a href="#worker1-putty-연결-설정" class="anchor-heading" aria-labelledby="worker1-putty-연결-설정"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> worker1 putty 연결 설정</h3><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>putty.exe 실행 
    <span class="nt">--</span><span class="o">&gt;</span> master 선택 <span class="nt">--</span><span class="o">&gt;</span> Load

    Host Name :  192.168.56.1   Port:102
    Window <span class="nt">--</span><span class="o">&gt;</span> Colours <span class="nt">--</span><span class="o">&gt;</span> Default Foreground<span class="o">(</span>글자색<span class="o">)</span> ,Default Background<span class="o">(</span>배경색<span class="o">)</span>
    Session <span class="nt">--</span><span class="o">&gt;</span> Saved Sessions : worker1 <span class="nt">--</span><span class="o">&gt;</span> Save

    worker1 연결 

    Accept

    login as : root  
    Password : <span class="o">[</span>ubuntu] 
</code></pre></div></div><h3 id="worker2-putty-연결-설정"> <a href="#worker2-putty-연결-설정" class="anchor-heading" aria-labelledby="worker2-putty-연결-설정"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> worker2 putty 연결 설정</h3><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>putty.exe 실행 
    <span class="nt">--</span><span class="o">&gt;</span> master 선택 <span class="nt">--</span><span class="o">&gt;</span> Load

    Host Name :  192.168.56.1   Port:103
    Window <span class="nt">--</span><span class="o">&gt;</span> Colours <span class="nt">--</span><span class="o">&gt;</span> Default Foreground<span class="o">(</span>글자색<span class="o">)</span> 
    Session <span class="nt">--</span><span class="o">&gt;</span> Saved Sessions : worker2 <span class="nt">--</span><span class="o">&gt;</span> Save

    worker2 연결 

    Accept

    login as : root  
    Password : <span class="o">[</span>ubuntu] 
</code></pre></div></div><h2 id="마스터-노드에서만-실행-kubeadm-init-명령을-통해서-클러스터를-생성한다"> <a href="#마스터-노드에서만-실행-kubeadm-init-명령을-통해서-클러스터를-생성한다" class="anchor-heading" aria-labelledby="마스터-노드에서만-실행-kubeadm-init-명령을-통해서-클러스터를-생성한다"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> (마스터 노드에서만 실행 )kubeadm init 명령을 통해서 클러스터를 생성한다.</h2><h3 id="kubeadm-init-명령어로-마스터-서버를-만든다"> <a href="#kubeadm-init-명령어로-마스터-서버를-만든다" class="anchor-heading" aria-labelledby="kubeadm-init-명령어로-마스터-서버를-만든다"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> kubeadm init 명령어로 마스터 서버를 만든다.</h3><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@master:~# kubeadm init
I0112 13:27:59.287535    4305 version.go:254] remote version is much newer: v1.2            6.0<span class="p">;</span> falling back to: stable-1.21
<span class="o">[</span>init] Using Kubernetes version: v1.21.14
<span class="o">[</span>preflight] Running pre-flight checks
<span class="o">[</span>preflight] Pulling images required <span class="k">for </span>setting up a Kubernetes cluster
... 중략
Then you can <span class="nb">join </span>any number of worker nodes by running the following on each as root:

kubeadm <span class="nb">join </span>192.168.137.101:6443 <span class="nt">--token</span> d77u1g.yknmv3qjjf6knxf1 <span class="se">\</span>
        <span class="nt">--discovery-token-ca-cert-hash</span> sha256:c78641cda30821182794b94198cf0a17144cebbb4b1ae54daff71f9fd48f91d0
</code></pre></div></div><h2 id="쿠버네티스-클러스터에-조인하기-위한-명령어-구문을-저장"> <a href="#쿠버네티스-클러스터에-조인하기-위한-명령어-구문을-저장" class="anchor-heading" aria-labelledby="쿠버네티스-클러스터에-조인하기-위한-명령어-구문을-저장"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 쿠버네티스 클러스터에 조인하기 위한 명령어 구문을 저장</h2><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@master:~# <span class="nb">cat</span> <span class="o">&gt;</span> token.sh
kubeadm <span class="nb">join </span>192.168.137.101:6443 <span class="nt">--token</span> d77u1g.yknmv3qjjf6knxf1 <span class="se">\</span>
        <span class="nt">--discovery-token-ca-cert-hash</span> sha256:c78641cda30821182794b94198cf0a17144cebbb4b1ae54daff71f9fd48f91d0
root@master:~#
root@master:~#
root@master:~# <span class="nb">cat </span>token.sh
kubeadm <span class="nb">join </span>192.168.137.101:6443 <span class="nt">--token</span> d77u1g.yknmv3qjjf6knxf1 <span class="se">\</span>
        <span class="nt">--discovery-token-ca-cert-hash</span> sha256:c78641cda30821182794b94198cf0a17144cebbb4b1ae54daff71f9fd48f91d0
</code></pre></div></div><h2 id="kubeconfig-파일의-위치를-kubeconfig-쉘-변수에-설정"> <a href="#kubeconfig-파일의-위치를-kubeconfig-쉘-변수에-설정" class="anchor-heading" aria-labelledby="kubeconfig-파일의-위치를-kubeconfig-쉘-변수에-설정"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> kubeconfig 파일의 위치를 KUBECONFIG 쉘 변수에 설정</h2><p>root 사용자가 쿠버네티스 클러스터의 API에 접근할 수 있도록 인증하기 위함이다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># nano ~/.bashrc</span>
<span class="nb">export </span><span class="nv">KUBECONFIG</span><span class="o">=</span>/etc/kubernetes/admin.conf      &lt;<span class="nt">----</span> 파일 맨 아래 줄에 추가한다.

ctrl+o <span class="o">(</span>저장<span class="o">)</span> <span class="nt">--</span><span class="o">&gt;</span> enter <span class="nt">--</span><span class="o">&gt;</span> ctrl+x <span class="o">(</span>종료<span class="o">)</span>

<span class="c"># source ~/.bashrc </span>
<span class="c"># echo $KUBECONFIG </span>
/etc/kubernetes/admin.conf
</code></pre></div></div><h3 id="pod-네트워크-추가-기능-구성"> <a href="#pod-네트워크-추가-기능-구성" class="anchor-heading" aria-labelledby="pod-네트워크-추가-기능-구성"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Pod 네트워크 추가 기능 구성</h3><p>Pod가 서로 통신 할 수 있도록 CNI (Container Network Interface) 기반 Pod 네트워크 추가 기능 구성한다.<br /> 네트워크가 설치되기 전에 클러스터 DNS (CoreDNS)가 시작되지 않는다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> calico <span class="o">(</span>https://docs.projectcalico.org/getting-started/kubernetes/self-managed-onprem/onpremises<span class="o">)</span>
<span class="c"># wget https://docs.projectcalico.org/manifests/calico.yaml </span>
<span class="c"># kubectl apply -f calico.yaml</span>
</code></pre></div></div><blockquote><p>안될땐 아래<br /> kubectl apply -f <a href="https://raw.githubusercontent.com/projectcalico/calico/v3.25.0/manifests/calico.yaml">https://raw.githubusercontent.com/projectcalico/calico/v3.25.0/manifests/calico.yaml</a></p></blockquote><h2 id="마스터-노드에서만-실행-클러스터-구성-상태-확인"> <a href="#마스터-노드에서만-실행-클러스터-구성-상태-확인" class="anchor-heading" aria-labelledby="마스터-노드에서만-실행-클러스터-구성-상태-확인"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> [마스터 노드에서만 실행] 클러스터 구성 상태 확인</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@master:~# kubectl get nodes
NAME     STATUS   ROLES                  AGE   VERSION
master   Ready    control-plane,master   10m   v1.21.0
root@master:~# kubectl get pods --all-namespaces
NAMESPACE     NAME                                       READY   STATUS    RESTARTS   AGE
kube-system   calico-kube-controllers-846d7f49d8-hmc2h   1/1     Running   0          4m47s
kube-system   calico-node-2tvpz                          1/1     Running   0          4m47s
kube-system   coredns-558bd4d5db-cnnwp                   1/1     Running   0          9m52s
kube-system   coredns-558bd4d5db-skncw                   1/1     Running   0          9m52s
kube-system   etcd-master                                1/1     Running   0          10m
kube-system   kube-apiserver-master                      1/1     Running   0          10m
kube-system   kube-controller-manager-master             1/1     Running   0          10m
kube-system   kube-proxy-ln6sg                           1/1     Running   0          9m52s
kube-system   kube-scheduler-master                      1/1     Running   0          10m
root@master:~#
</code></pre></div></div><h2 id="마스터-노드에서만-실행-생성한--kubeadm-join-구문이-든-쉘-스크립트를-워커-노드로-복사"> <a href="#마스터-노드에서만-실행-생성한--kubeadm-join-구문이-든-쉘-스크립트를-워커-노드로-복사" class="anchor-heading" aria-labelledby="마스터-노드에서만-실행-생성한--kubeadm-join-구문이-든-쉘-스크립트를-워커-노드로-복사"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> [마스터 노드에서만 실행] 생성한 # kubeadm join 구문이 든 쉘 스크립트를 워커 노드로 복사</h2><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@master:~# scp token.sh worker1:/root/token.sh
The authenticity of host <span class="s1">'worker1 (192.168.137.102)'</span> can<span class="s1">'t be established.
ECDSA key fingerprint is SHA256:BYy8+Ddey03hnid+vAJg4KqojvmM1PMVQK0zZReh71s.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '</span>worker1,192.168.137.102<span class="s1">' (ECDSA) to the list of known hosts.
root@worker1'</span>s password:
Permission denied, please try again.
root@worker1<span class="s1">'s password:
token.sh                                                                                        100%  179   130.5KB/s   00:00

root@master:~# scp token.sh worker2:/root/token.sh
The authenticity of host '</span>worker2 <span class="o">(</span>192.168.137.103<span class="o">)</span><span class="s1">' can'</span>t be established.
ECDSA key fingerprint is SHA256:BYy8+Ddey03hnid+vAJg4KqojvmM1PMVQK0zZReh71s.
Are you sure you want to <span class="k">continue </span>connecting <span class="o">(</span><span class="nb">yes</span>/no<span class="o">)</span>? <span class="nb">yes
</span>Warning: Permanently added <span class="s1">'worker2,192.168.137.103'</span> <span class="o">(</span>ECDSA<span class="o">)</span> to the list of known hosts.
root@worker2<span class="s1">'s password:
token.sh                                                                                        100%  179   102.4KB/s   00:00
</span></code></pre></div></div><h2 id="워커-노드에서만-실행-복사된-스크립트를-실행하여-클러스터에-조인"> <a href="#워커-노드에서만-실행-복사된-스크립트를-실행하여-클러스터에-조인" class="anchor-heading" aria-labelledby="워커-노드에서만-실행-복사된-스크립트를-실행하여-클러스터에-조인"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> [워커 노드에서만 실행] 복사된 스크립트를 실행하여 클러스터에 조인</h2><p><code class="language-plaintext highlighter-rouge">worker1, worker2 # chmod +x token.sh</code><br /> <code class="language-plaintext highlighter-rouge">worker1, worker2 # ./token.sh</code></p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@worker1:~# <span class="nb">chmod</span> +x token.sh
root@worker1:~# ./token.sh
<span class="o">[</span>preflight] Running pre-flight checks
<span class="o">[</span>preflight] Reading configuration from the cluster...
<span class="o">[</span>preflight] FYI: You can look at this config file with <span class="s1">'kubectl -n kube-system get cm kubeadm-config -o yaml'</span>
<span class="o">[</span>kubelet-start] Writing kubelet configuration to file <span class="s2">"/var/lib/kubelet/config.yaml"</span>
<span class="o">[</span>kubelet-start] Writing kubelet environment file with flags to file <span class="s2">"/var/lib/kubelet/kubeadm-flags.env"</span>
<span class="o">[</span>kubelet-start] Starting the kubelet
<span class="o">[</span>kubelet-start] Waiting <span class="k">for </span>the kubelet to perform the TLS Bootstrap...

This node has joined the cluster:
<span class="k">*</span> Certificate signing request was sent to apiserver and a response was received.
<span class="k">*</span> The Kubelet was informed of the new secure connection details.

Run <span class="s1">'kubectl get nodes'</span> on the control-plane to see this node <span class="nb">join </span>the cluster.
</code></pre></div></div><h2 id="마스터-노드에서만-실행-클러스터-조인-상태-확인"> <a href="#마스터-노드에서만-실행-클러스터-조인-상태-확인" class="anchor-heading" aria-labelledby="마스터-노드에서만-실행-클러스터-조인-상태-확인"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> [마스터 노드에서만 실행] 클러스터 조인 상태 확인</h2><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@master:~# kubectl cluster-info
Kubernetes control plane is running at https://192.168.137.101:6443
CoreDNS is running at https://192.168.137.101:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy
</code></pre></div></div><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@master:~# kubectl get nodes
NAME      STATUS     ROLES                  AGE   VERSION
master    Ready      control-plane,master   13m   v1.21.0
worker1   NotReady   &lt;none&gt;                 62s   v1.21.0
worker2   NotReady   &lt;none&gt;                 59s   v1.21.0
</code></pre></div></div><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@master:~# kubectl get pods <span class="nt">--all-namespaces</span>
NAMESPACE     NAME                                       READY   STATUS     RESTARTS   AGE
kube-system   calico-kube-controllers-846d7f49d8-hmc2h   1/1     Running    0          8m7s
kube-system   calico-node-2tvpz                          1/1     Running    0          8m7s
kube-system   calico-node-ndnrd                          0/1     Init:0/3   0          78s
kube-system   calico-node-s99pf                          0/1     Init:1/3   0          75s
kube-system   coredns-558bd4d5db-cnnwp                   1/1     Running    0          13m
kube-system   coredns-558bd4d5db-skncw                   1/1     Running    0          13m
kube-system   etcd-master                                1/1     Running    0          13m
kube-system   kube-apiserver-master                      1/1     Running    0          13m
kube-system   kube-controller-manager-master             1/1     Running    0          13m
kube-system   kube-proxy-cbkjv                           1/1     Running    0          75s
kube-system   kube-proxy-ln6sg                           1/1     Running    0          13m
kube-system   kube-proxy-rvdnm                           1/1     Running    0          78s
kube-system   kube-scheduler-master                      1/1     Running    0          13m
</code></pre></div></div><p>아래 그림을 보며 이해해 보자.</p><p><img src="/assets/images/k8sinstall1.png" alt="" /></p><p class="text-center"><em>[쿠버네티스 아키텍쳐 (https://kubernetes.io/docs/concepts/architecture/)]</em></p></main><hr><footer><p><a href="#top" id="back-to-top">Back to top</a></p><p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2023 dmjgr5. Distributed by an <a href="https://github.com/dmjgr5/dmjgr5.github.io/blob/main/LICENSE.txt">MIT license.</a> <a href="https://www.netlify.com/">This site is powered by Netlify.</a></p><div class="d-flex mt-2"><p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/dmjgr5/dmjgr5.github.io/tree/main/docs/cloud/k8s-install-lab.md" id="edit-this-page">Edit this page on GitHub</a></p></div></footer></div></div><div class="search-overlay"></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script>
