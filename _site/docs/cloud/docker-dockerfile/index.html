<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"><link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"><style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(9)) > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(7) > ul > li:nth-child(3) > ul > li:nth-child(9) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(7) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(7) > ul > li:nth-child(3) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(7) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(7) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list { display: block; }</style><script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico" type="image/x-icon"><title>Dockerfile | Just the Notes</title><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Dockerfile" /><meta property="og:locale" content="en_US" /><meta name="description" content="Notes for All things" /><meta property="og:description" content="Notes for All things" /><link rel="canonical" href="http://localhost:4000/docs/cloud/docker-dockerfile/" /><meta property="og:url" content="http://localhost:4000/docs/cloud/docker-dockerfile/" /><meta property="og:site_name" content="Just the Notes" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Dockerfile" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Notes for All things","headline":"Dockerfile","url":"http://localhost:4000/docs/cloud/docker-dockerfile/"}</script><body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewBox="0 0 16 16"><title>Copy</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"><title>Copied</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg><div class="side-bar"><div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Just the Notes </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button></div><nav aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Network & Security category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/network-security" class="nav-list-link">Network & Security</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/network-security/network-security-proxy/" class="nav-list-link">Proxy</a><li class="nav-list-item"><a href="/docs/network-security/network-security-webserver-was/" class="nav-list-link">Web Server & WAS</a><li class="nav-list-item"><a href="/docs/network-security/network-ssh/" class="nav-list-link">SSH 기본 개념</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in OS Systems category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/os-systems" class="nav-list-link">OS Systems</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Linux category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/os-systems/linux/" class="nav-list-link">Linux</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/os-systems/linux-basics/" class="nav-list-link">Linux Basics</a><li class="nav-list-item"> <a href="/docs/os-systems/linux-command/" class="nav-list-link">Linux Command</a></ul></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Database category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/database" class="nav-list-link">Database</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/database/database-mysqlbasic/" class="nav-list-link">MySQL 기본</a><li class="nav-list-item"><a href="/docs/database/database-edgedb/" class="nav-list-link">Edge DB on Windows10</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Programming Language category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming-language" class="nav-list-link">Programming Language</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/programming-language/html/" class="nav-list-link">HTML</a><li class="nav-list-item"><a href="/docs/programming-language/css/" class="nav-list-link">CSS</a><li class="nav-list-item"><a href="/docs/programming-language/proc/" class="nav-list-link">Proc*C</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in C, C# category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming-language/c-csharp/" class="nav-list-link">C, C#</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/programming-language/gcc/" class="nav-list-link">gcc 컴파일하기</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Java Script category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming-language/javascript/" class="nav-list-link">Java Script</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/programming-language/js-basic/" class="nav-list-link">Java Script 기본 개념</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Node.js category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming-language/nodejs/" class="nav-list-link">Node.js</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/programming-language/nodejs-basic/" class="nav-list-link">Node.js 기본 개념</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Python category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming-language/python/" class="nav-list-link">Python</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/programming-language/flutter-panabara/" class="nav-list-link">Understanding of Python</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Vue.js category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming-language/vuejs/" class="nav-list-link">Vue.js</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/programming-language/vuejs-basic/" class="nav-list-link">Vue.js 기본 개념</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Flutter category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming-language/flutter/" class="nav-list-link">Flutter</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/programming-language/flutter-basic/" class="nav-list-link">Flutter 기본 개념</a><li class="nav-list-item"> <a href="/docs/programming-language/flutter-example/" class="nav-list-link">Flutter 주요 예제</a><li class="nav-list-item"> <a href="/docs/programming-language/flutter-panabara-pre/" class="nav-list-link">Toy - Panabara 준비</a><li class="nav-list-item"> <a href="/docs/programming-language/flutter-evcharger/" class="nav-list-link">Toy - 전기차충전소 위치찾기</a><li class="nav-list-item"> <a href="/docs/programming-language/flutter-emf/" class="nav-list-link">Toy - 무선국전파노출지수</a><li class="nav-list-item"> <a href="/docs/programming-language/flutter-earth/" class="nav-list-link">Toy - EarthToday</a></ul><li class="nav-list-item"><a href="/docs/programming-language/markdown/" class="nav-list-link">Markdown</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Framework category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/framework" class="nav-list-link">Framework</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Spring category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/framework/spring/" class="nav-list-link">Spring</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/framework/spring-basic/" class="nav-list-link">Spring 기본 개념</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Spring Boot category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/framework/springboot/" class="nav-list-link">Spring Boot</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/framework/spring-reference/" class="nav-list-link">Spring Boot 참조 자료</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Django category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/framework/django/" class="nav-list-link">Django</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/framework/django-project/" class="nav-list-link">Creating Django</a><li class="nav-list-item"> <a href="/docs/framework/django-local/" class="nav-list-link">Djanog on Local</a><li class="nav-list-item"> <a href="/docs/framework/django-aws/" class="nav-list-link">Djanog on AWS EC2</a></ul></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cloud category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/cloud" class="nav-list-link">Cloud</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/cloud/cloud-network/" class="nav-list-link">Cloud Network</a><li class="nav-list-item"><a href="/docs/cloud/cloud-mas/" class="nav-list-link">MAS</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Docker category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/cloud/docker/" class="nav-list-link">Docker</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/cloud/docker-install-18-04/" class="nav-list-link">Ubuntu 에 Docker 설치</a><li class="nav-list-item"> <a href="/docs/cloud/docker-install-image-vb/" class="nav-list-link">가상머신 이미지 가져오기</a><li class="nav-list-item"> <a href="/docs/cloud/docker-container-tech/" class="nav-list-link">Container 기반 기술</a><li class="nav-list-item"> <a href="/docs/cloud/docker-arch/" class="nav-list-link">Docker Architecture</a><li class="nav-list-item"> <a href="/docs/cloud/docker-status/" class="nav-list-link">Docker Status</a><li class="nav-list-item"> <a href="/docs/cloud/docker-command/" class="nav-list-link">Docker Command</a><li class="nav-list-item"> <a href="/docs/cloud/docker-volume/" class="nav-list-link">Docker Volume</a><li class="nav-list-item"> <a href="/docs/cloud/docker-network/" class="nav-list-link">Docker Network</a><li class="nav-list-item"> <a href="/docs/cloud/docker-dockerfile/" class="nav-list-link">Dockerfile</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Git & Github category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/cloud/gitgithub/" class="nav-list-link">Git & Github</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/cloud/gitgithub-gitcli/" class="nav-list-link">Git CLI</a><li class="nav-list-item"> <a href="/docs/cloud/gitgithub-command/" class="nav-list-link">Git Command</a><li class="nav-list-item"> <a href="/docs/cloud/gitgithub-githublocalremote/" class="nav-list-link">Github 로컬/원격 연동</a><li class="nav-list-item"> <a href="/docs/cloud/gitgithub-githubprofile/" class="nav-list-link">Github Profile</a><li class="nav-list-item"> <a href="/docs/cloud/gitgithub-githubpagelocal/" class="nav-list-link">Github Page On Local</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Kubernetes category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/cloud/k8s/" class="nav-list-link">Kubernetes</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/cloud/k8s-install-lab/" class="nav-list-link">Kubernetes 실습 환경</a><li class="nav-list-item"> <a href="/docs/cloud/k8s-labelselector/" class="nav-list-link">Label & Selector</a><li class="nav-list-item"> <a href="/docs/cloud/k8s-object-controller/" class="nav-list-link">Object & Controller</a><li class="nav-list-item"> <a href="/docs/cloud/k8s-pod/" class="nav-list-link">Pod</a><li class="nav-list-item"> <a href="/docs/cloud/k8s-service/" class="nav-list-link">Service</a><li class="nav-list-item"> <a href="/docs/cloud/k8s-replicaset/" class="nav-list-link">Replicaset</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in AWS category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/cloud/aws/" class="nav-list-link">AWS</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/cloud/aws-basic/" class="nav-list-link">AWS Basic</a></ul></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Build & Package category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/buildpackage" class="nav-list-link">Build & Package</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/buildpackage/buildpackage-mavenbasic/" class="nav-list-link">Maven 생성 및 실행</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Devops category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/devops" class="nav-list-link">Devops</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/devops/exercise/" class="nav-list-link">DevOps Exercise</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Jfrog category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/devops/jfrog/" class="nav-list-link">Jfrog</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/devops/jfrog-trial/" class="nav-list-link">Jfrog Trial - Cloud</a><li class="nav-list-item"> <a href="/docs/devops/jfrog-trial/" class="nav-list-link">Jfrog Trial - Cloud</a><li class="nav-list-item"> <a href="/docs/devops/jfrog-triallocal/" class="nav-list-link">Jfrog Trial - Local</a><li class="nav-list-item"> <a href="/docs/devops/jfrog-restapi/" class="nav-list-link">Jfrog Rest API</a><li class="nav-list-item"> <a href="/docs/devops/jfrog-restapi/" class="nav-list-link">Jfrog Rest API</a><li class="nav-list-item"> <a href="/docs/devops/jfrog-repowithprj/" class="nav-list-link">Repository with Project</a><li class="nav-list-item"> <a href="/docs/devops/jfrog-repowithprj/" class="nav-list-link">Repository with Project</a></ul></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in New Technology category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/newtech" class="nav-list-link">New Technology</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in AI category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/New%20Technology/ai/" class="nav-list-link">AI</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/newtech/ai-machinelearning-basic/" class="nav-list-link">Machine Learning Theory</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Blockchain category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/New%20Technology/blockchain/" class="nav-list-link">Blockchain</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/newtech/blockchain-basic/" class="nav-list-link">Blockchain 개요</a><li class="nav-list-item"> <a href="/docs/newtech/blockchain-solidity/" class="nav-list-link">리믹스(Remix) 도구를 이용한 Solidity 이해하기</a><li class="nav-list-item"> <a href="/docs/newtech/blockchain-geth/" class="nav-list-link">geth 설치 및 기본 활용하기</a></ul></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Theoretical category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/theoretical" class="nav-list-link">Theoretical</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/theoretical/theoretical-stats/" class="nav-list-link">통계 분석 기초 용어 정리</a><li class="nav-list-item"><a href="/docs/theoretical/theoretical-5why/" class="nav-list-link">5 Whys 기법</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Book Review category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/book-review" class="nav-list-link">Book Review</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/book-review/book-review-blockchain/" class="nav-list-link">블록체인 무엇인가?</a></ul><li class="nav-list-item"><a href="/docs/guide/" class="nav-list-link">===== Guide page starts =====</a><li class="nav-list-item"><a href="/index_origin/" class="nav-list-link">Home</a><li class="nav-list-item"><a href="/docs/configuration/" class="nav-list-link">Configuration</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in UI Components category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/ui-components" class="nav-list-link">UI Components</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/ui-components/typography/" class="nav-list-link">Typography</a><li class="nav-list-item"><a href="/docs/ui-components/buttons/" class="nav-list-link">Buttons</a><li class="nav-list-item"><a href="/docs/ui-components/labels/" class="nav-list-link">Labels</a><li class="nav-list-item"><a href="/docs/ui-components/tables/" class="nav-list-link">Tables</a><li class="nav-list-item"><a href="/docs/ui-components/lists/" class="nav-list-link">Lists</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Code category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/ui-components/code/" class="nav-list-link">Code</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/ui-components/code/line-numbers/" class="nav-list-link">Code with line numbers</a></ul><li class="nav-list-item"><a href="/docs/ui-components/callouts/" class="nav-list-link">Callouts</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Utilities category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/utilities" class="nav-list-link">Utilities</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/utilities/color/" class="nav-list-link">Color</a><li class="nav-list-item"><a href="/docs/utilities/layout/" class="nav-list-link">Layout</a><li class="nav-list-item"><a href="/docs/utilities/responsive-modifiers/" class="nav-list-link">Responsive Modifiers</a><li class="nav-list-item"><a href="/docs/utilities/typography/" class="nav-list-link">Typography</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Layout category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/layout/layout/" class="nav-list-link">Layout</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in A minimal layout page category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/layout/minimal/minimal/" class="nav-list-link">A minimal layout page</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/layout/minimal/default-child/" class="nav-list-link">Default layout child page</a><li class="nav-list-item"> <a href="/docs/layout/minimal/minimal-child/" class="nav-list-link">Minimal layout child page</a></ul></ul><li class="nav-list-item"><a href="/docs/navigation-structure/" class="nav-list-link">Navigation Structure</a><li class="nav-list-item"><a href="/docs/customization/" class="nav-list-link">Customization</a><li class="nav-list-item"><a href="/docs/search/" class="nav-list-link">Search</a><li class="nav-list-item"><a href="/docs/index-test/" class="nav-list-link">Markdown kitchen sink</a><li class="nav-list-item"><a href="/CHANGELOG/" class="nav-list-link">CHANGELOG</a><li class="nav-list-item"><a href="/MIGRATION/" class="nav-list-link">Migration and Upgrading</a></ul><ul class="nav-list"><li class="nav-list-item external"> <a href="https://github.com/dmjgr5/dmjgr5.github.io" class="nav-list-link external" > Just the Notes on GitHub <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/dmjgr5/dmjgr5.github.io">Just the Notes</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search" role="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Just the Notes" aria-label="Search Just the Notes" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="https://github.com/dmjgr5/dmjgr5.github.io" class="site-button" > Just the Notes on GitHub </a></ul></nav></div><div class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="/docs/cloud">Cloud</a><li class="breadcrumb-nav-list-item"><a href="/docs/cloud/docker/">Docker</a><li class="breadcrumb-nav-list-item"><span>Dockerfile</span></ol></nav><div id="main-content" class="main-content"><main><h1 class="no_toc" id="dockerfile"> <a href="#dockerfile" class="anchor-heading" aria-labelledby="dockerfile"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Dockerfile</h1><h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents</h2><ol id="markdown-toc"><li><a href="#dockerfile-주요-개념과-생성" id="markdown-toc-dockerfile-주요-개념과-생성">Dockerfile 주요 개념과 생성</a><ol><li><a href="#dockerfile-을-통한-build-방법" id="markdown-toc-dockerfile-을-통한-build-방법">Dockerfile 을 통한 build 방법</a><li><a href="#dockerfile-과-image-layer" id="markdown-toc-dockerfile-과-image-layer">Dockerfile 과 Image layer</a><li><a href="#이미지-생성-시-용량-관련-고려사항" id="markdown-toc-이미지-생성-시-용량-관련-고려사항">이미지 생성 시 용량 관련 고려사항</a></ol><li><a href="#dockerfile-주요-키워드" id="markdown-toc-dockerfile-주요-키워드">Dockerfile 주요 키워드</a><ol><li><a href="#run" id="markdown-toc-run">RUN</a><ol><li><a href="#shell-형식-기술" id="markdown-toc-shell-형식-기술">shell 형식 기술</a><li><a href="#exec-형식-기술" id="markdown-toc-exec-형식-기술">exec 형식 기술</a></ol><li><a href="#cmd" id="markdown-toc-cmd">CMD</a><li><a href="#entrypoint" id="markdown-toc-entrypoint">ENTRYPOINT</a><li><a href="#env" id="markdown-toc-env">ENV</a><li><a href="#label" id="markdown-toc-label">LABEL</a><li><a href="#add--copy" id="markdown-toc-add--copy">ADD , COPY</a><li><a href="#expose" id="markdown-toc-expose">EXPOSE</a></ol></ol><hr /><p class="highlight"><code class="language-plaintext highlighter-rouge">Dockerfile</code>은 DockerImage를 생성하기 위한 스크립트(설정파일)이다. 여러가지 명령어를 토대로 <code class="language-plaintext highlighter-rouge">Dockerfile</code>을 작성한 후 빌드하면 Docker는 <code class="language-plaintext highlighter-rouge">Dockerfile</code> 에 나열된 명령문을 차례대로 수행하며 <code class="language-plaintext highlighter-rouge">DockerImage</code>를 생성해준다. <code class="language-plaintext highlighter-rouge">Dockerfile</code> 을 읽을 줄 안다는 것은 해당 이미지가 어떻게 구성되어 있는지 알 수 있다는 의미이다</p><h2 id="dockerfile-주요-개념과-생성"> <a href="#dockerfile-주요-개념과-생성" class="anchor-heading" aria-labelledby="dockerfile-주요-개념과-생성"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Dockerfile 주요 개념과 생성</h2><p><img src="/assets/images/dockerdockerfile1.png" alt="" /></p><p class="text-center"><em>[Dockerfile 개념(https://www.researchgate.net/figure/Example-of-a-fictitious-Dockerfile-illustrating-common-instructions-and-quality-issues_fig1_345667168)]</em></p><h3 id="dockerfile-을-통한-build-방법"> <a href="#dockerfile-을-통한-build-방법" class="anchor-heading" aria-labelledby="dockerfile-을-통한-build-방법"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Dockerfile 을 통한 build 방법</h3><p><code class="language-plaintext highlighter-rouge">docker build</code> 명령어를 사용한다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@master:~/labfile/dockerfile_dir# <span class="nb">cat </span>Dockerfile
FROM centos
</code></pre></div></div><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// FROM 센토스를 베이스 이미지로 지정한다.
root@docker1:~/labfile/dockerfile_dir# <span class="nb">cat </span>Dockerfile
FROM centos
root@docker1:~/labfile/dockerfile_dir#

// docker build 실행
root@docker1:~/labfile/dockerfile_dir# docker build <span class="nt">-t</span> testimage <span class="nt">-f</span> Dockerfile <span class="nb">.</span>
Sending build context to Docker daemon  176.1kB
Step 1/1 : FROM centos
latest: Pulling from library/centos
a1d0c7532777: Pull <span class="nb">complete
</span>Digest: sha256:a27fd8080b517143cbbbab9dfb7c8571c40d67d534bbdee55bd6c473f432b177
Status: Downloaded newer image <span class="k">for </span>centos:latest
 <span class="nt">---</span><span class="o">&gt;</span> 5d0da3dc9764
Successfully built 5d0da3dc9764
Successfully tagged testimage:latest
root@docker1:~/labfile/dockerfile_dir#

// testimage 이미지 생성 확인
root@docker1:~/labfile/dockerfile_dir# docker image <span class="nb">ls
</span>REPOSITORY          TAG       IMAGE ID       CREATED         SIZE
dcpark/web-nginx    1.0       6f10cf278ad2   24 hours ago    174MB
dcpark/box          1.0       66ba00ad3de8   6 days ago      4.87MB
busybox             latest    66ba00ad3de8   6 days ago      4.87MB
dcpark/web-server   1.0       1403e55ab369   2 weeks ago     142MB
nginx               latest    1403e55ab369   2 weeks ago     142MB
ubuntu              latest    6b7dfa7e8fdb   4 weeks ago     77.8MB
centos              latest    5d0da3dc9764   16 months ago   231MB
testimage           latest    5d0da3dc9764   16 months ago   231MB
root@docker1:~/labfile/dockerfile_dir#
</code></pre></div></div><blockquote><p><code class="language-plaintext highlighter-rouge">-t</code> (tag) : 이미지 이름<br /> <code class="language-plaintext highlighter-rouge">-f</code> (file) : Dockerfile 이름<br /> <code class="language-plaintext highlighter-rouge">.</code> : Dockerfile 위치하는 디렉토리</p></blockquote><h3 id="dockerfile-과-image-layer"> <a href="#dockerfile-과-image-layer" class="anchor-heading" aria-labelledby="dockerfile-과-image-layer"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Dockerfile 과 Image layer</h3><p>Dockerfile 의 명령별로 이미지 레이어가 생성된다<br /> ** 예) 베이스 이미지는 <code class="language-plaintext highlighter-rouge">ubuntu</code>, 그 위에 <code class="language-plaintext highlighter-rouge">nginx</code> 레이어로 두번째 이미지, 그 위에 <code class="language-plaintext highlighter-rouge">index.html</code> 이 올라가 세번째 이미지가 생성된다. **</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@master:~/labfile/dockerfile_dir# <span class="nb">cat </span>Dockerfile.1
FROM ubuntu
RUN  apt-get update <span class="o">&amp;&amp;</span> apt-get <span class="nb">install</span> <span class="nt">-y</span> <span class="nt">-q</span> nginx <span class="o">&amp;&amp;</span> <span class="nb">rm</span> <span class="nt">-rf</span> /var/lib/apt/lists/<span class="k">*</span>
COPY index.html /var/www/html/
CMD <span class="o">[</span><span class="s2">"nginx"</span>, <span class="s2">"-g"</span>, <span class="s2">"daemon off;"</span><span class="o">]</span>

root@master:~/labfile/dockerfile_dir#
</code></pre></div></div><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// index.html 파일 생성
root@docker1:~/labfile/dockerfile_dir# <span class="nb">echo </span>Hello World <span class="o">&gt;</span> index.html

// Dockerfile.1 소스 확인
root@docker1:~/labfile/dockerfile_dir# <span class="nb">cat </span>Dockerfile.1
FROM ubuntu
RUN  apt-get update <span class="o">&amp;&amp;</span> apt-get <span class="nb">install</span> <span class="nt">-y</span> <span class="nt">-q</span> nginx
COPY index.html /var/www/html/
CMD <span class="o">[</span><span class="s2">"nginx"</span>, <span class="s2">"-g"</span>, <span class="s2">"daemon off;"</span><span class="o">]</span>
root@docker1:~/labfile/dockerfile_dir#

// docker build
root@docker1:~/labfile/dockerfile_dir# docker build <span class="nt">-t</span> web-nginx:v1 <span class="nt">-f</span> Dockerfile.1 <span class="nb">.</span>
Sending build context to Docker daemon  176.1kB
Step 1/4 : FROM ubuntu
 <span class="nt">---</span><span class="o">&gt;</span> 6b7dfa7e8fdb
Step 2/4 : RUN  apt-get update <span class="o">&amp;&amp;</span> apt-get <span class="nb">install</span> <span class="nt">-y</span> <span class="nt">-q</span> nginx
 <span class="nt">---</span><span class="o">&gt;</span> Running <span class="k">in </span>7e6fe0ef8c1b
Get:1 http://archive.ubuntu.com/ubuntu jammy InRelease <span class="o">[</span>270 kB]
Get:2 http://security.ubuntu.com/ubuntu jammy-security InRelease <span class="o">[</span>110 kB]
Get:3 http://security.ubuntu.com/ubuntu jammy-security/universe amd64 Packages <span class="o">[</span>786 kB]
Get:4 http://archive.ubuntu.com/ubuntu jammy-updates InRelease <span class="o">[</span>114 kB]
Get:5 http://archive.ubuntu.com/ubuntu jammy-backports InRelease <span class="o">[</span>99.8 kB]
Get:6 http://archive.ubuntu.com/ubuntu jammy/restricted amd64 Packages <span class="o">[</span>164 kB]
Get:7 http://archive.ubuntu.com/ubuntu jammy/multiverse amd64 Packages <span class="o">[</span>266 kB]
Get:8 http://archive.ubuntu.com/ubuntu jammy/main amd64 Packages <span class="o">[</span>1792 kB]
... 중략
Setting up nginx <span class="o">(</span>1.18.0-6ubuntu14.3<span class="o">)</span> ...
Processing triggers <span class="k">for </span>libc-bin <span class="o">(</span>2.35-0ubuntu3.1<span class="o">)</span> ...
Removing intermediate container 7e6fe0ef8c1b
 <span class="nt">---</span><span class="o">&gt;</span> 1edf77c6398f
Step 3/4 : COPY index.html /var/www/html/
 <span class="nt">---</span><span class="o">&gt;</span> eeb5a81c7c8c
Step 4/4 : CMD <span class="o">[</span><span class="s2">"nginx"</span>, <span class="s2">"-g"</span>, <span class="s2">"daemon off;"</span><span class="o">]</span>
 <span class="nt">---</span><span class="o">&gt;</span> Running <span class="k">in </span>3dda10f8fb0a
Removing intermediate container 3dda10f8fb0a
 <span class="nt">---</span><span class="o">&gt;</span> 63123ab8639e
Successfully built 63123ab8639e
Successfully tagged web-nginx:v1

// 이미지 생성 확인 <span class="o">(</span>web-nginx:v1<span class="o">)</span>
root@docker1:~/labfile/dockerfile_dir# docker image <span class="nb">ls
</span>REPOSITORY          TAG       IMAGE ID       CREATED              SIZE
web-nginx           v1        63123ab8639e   About a minute ago   174MB
dcpark/web-nginx    1.0       6f10cf278ad2   24 hours ago         174MB
dcpark/box          1.0       66ba00ad3de8   6 days ago           4.87MB
busybox             latest    66ba00ad3de8   6 days ago           4.87MB
nginx               latest    1403e55ab369   2 weeks ago          142MB
dcpark/web-server   1.0       1403e55ab369   2 weeks ago          142MB
ubuntu              latest    6b7dfa7e8fdb   4 weeks ago          77.8MB
centos              latest    5d0da3dc9764   16 months ago        231MB
testimage           latest    5d0da3dc9764   16 months ago        231MB
</code></pre></div></div><blockquote><p><code class="language-plaintext highlighter-rouge">FROM</code> : 기본 이미지<br /> <code class="language-plaintext highlighter-rouge">RUN</code> : 내부에서 수행할 작업<br /> <code class="language-plaintext highlighter-rouge">COPY</code> : 호스트에서 파일<br /> <code class="language-plaintext highlighter-rouge">CMD</code> : 1번 프로세스에 대한 command 의 약자</p></blockquote><h3 id="이미지-생성-시-용량-관련-고려사항"> <a href="#이미지-생성-시-용량-관련-고려사항" class="anchor-heading" aria-labelledby="이미지-생성-시-용량-관련-고려사항"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 이미지 생성 시 용량 관련 고려사항</h3><p>용량이 작은 베이스 이미지 선택하거나 불필요한 파일들 삭제한다.</p><ul><li>alpine , ###-slim, busybox<li><code class="language-plaintext highlighter-rouge">rm -rf /var/lib/apt/lists/*</code></ul><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@docker1:~/labfile/dockerfile_dir# nano Dockerfile.1
root@docker1:~/labfile/dockerfile_dir#
root@docker1:~/labfile/dockerfile_dir#
root@docker1:~/labfile/dockerfile_dir# <span class="nb">cat </span>Dockerfile.1
FROM ubuntu
RUN  apt-get update <span class="o">&amp;&amp;</span> apt-get <span class="nb">install</span> <span class="nt">-y</span> <span class="nt">-q</span> nginx <span class="o">&amp;&amp;</span> <span class="nb">rm</span> <span class="nt">-rf</span> /var/lib/apt/lists/<span class="k">*</span>
COPY index.html /var/www/html/
CMD <span class="o">[</span><span class="s2">"nginx"</span>, <span class="s2">"-g"</span>, <span class="s2">"daemon off;"</span><span class="o">]</span>

root@docker1:~/labfile/dockerfile_dir#
root@docker1:~/labfile/dockerfile_dir# docker build <span class="nt">-t</span> web-nginx:v2 <span class="nt">-f</span> Dockerfile.1 <span class="nb">.</span>
Sending build context to Docker daemon  176.1kB
Step 1/4 : FROM ubuntu
 <span class="nt">---</span><span class="o">&gt;</span> 6b7dfa7e8fdb
Step 2/4 : RUN  apt-get update <span class="o">&amp;&amp;</span> apt-get <span class="nb">install</span> <span class="nt">-y</span> <span class="nt">-q</span> nginx <span class="o">&amp;&amp;</span> <span class="nb">rm</span> <span class="nt">-rf</span> /var/lib/apt/lists/<span class="k">*</span>
 <span class="nt">---</span><span class="o">&gt;</span> Running <span class="k">in </span>72c6c189dc81
Get:1 http://archive.ubuntu.com/ubuntu jammy InRelease <span class="o">[</span>270 kB]
Get:2 http://security.ubuntu.com/ubuntu jammy-security InRelease <span class="o">[</span>110 kB]
... 중략
Processing triggers <span class="k">for </span>libc-bin <span class="o">(</span>2.35-0ubuntu3.1<span class="o">)</span> ...
Removing intermediate container 72c6c189dc81
 <span class="nt">---</span><span class="o">&gt;</span> 24be474303f8
Step 3/4 : COPY index.html /var/www/html/
 <span class="nt">---</span><span class="o">&gt;</span> 9622834c67c5
Step 4/4 : CMD <span class="o">[</span><span class="s2">"nginx"</span>, <span class="s2">"-g"</span>, <span class="s2">"daemon off;"</span><span class="o">]</span>
 <span class="nt">---</span><span class="o">&gt;</span> Running <span class="k">in </span>c75a2a490216
Removing intermediate container c75a2a490216
 <span class="nt">---</span><span class="o">&gt;</span> 5e2b37603055
Successfully built 5e2b37603055
Successfully tagged web-nginx:v2

root@docker1:~/labfile/dockerfile_dir# docker image <span class="nb">ls
</span>REPOSITORY          TAG       IMAGE ID       CREATED          SIZE
web-nginx           v2        5e2b37603055   18 seconds ago   133MB
web-nginx           v1        63123ab8639e   15 minutes ago   174MB
</code></pre></div></div><blockquote><p>/var/lib/apt/lists/*` 를 삭제하고 진행했을 때 v1 보다 사이즈가 작음을 확인할 수 있다.</p></blockquote><h2 id="dockerfile-주요-키워드"> <a href="#dockerfile-주요-키워드" class="anchor-heading" aria-labelledby="dockerfile-주요-키워드"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Dockerfile 주요 키워드</h2><h3 id="run"> <a href="#run" class="anchor-heading" aria-labelledby="run"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> RUN</h3><p>빌드 과정에서 어플리케이션/미들웨어 설치, 환경 설정을 위한 명령들을 정의한다. (계정생성, 그룹생성 등..)</p><h4 id="shell-형식-기술"> <a href="#shell-형식-기술" class="anchor-heading" aria-labelledby="shell-형식-기술"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> shell 형식 기술</h4><p>자주 사용하는 방식으로 쉘 프롬프트에 명령을 기술하는 방식으로 다음과 같으며, 베이스 이미지 위에서 <code class="language-plaintext highlighter-rouge">/bin/sh -c</code> 실행과 동일하다.<br /> <code class="language-plaintext highlighter-rouge">RUN apt-get update &amp;&amp; apt-get install -y -q nginx</code></p><h4 id="exec-형식-기술"> <a href="#exec-형식-기술" class="anchor-heading" aria-labelledby="exec-형식-기술"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> exec 형식 기술</h4><p>쉘을 사용하지 않고 직접 실행하고 <code class="language-plaintext highlighter-rouge">$HOME</code> 같은 환경변수 사용가능하다. <code class="language-plaintext highlighter-rouge">JSON</code> 형식을 사용한다.<br /> <code class="language-plaintext highlighter-rouge">RUN ["/bin/bash", -C, "apt-get install -y nginx"]</code></p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@docker1:~/labfile/dockerfile_dir# <span class="nb">cat </span>Dockerfile.2
FROM ubuntu
RUN <span class="nb">echo</span> <span class="s2">"Shell: Home Dir --&gt;  </span><span class="nv">$HOME</span><span class="s2"> "</span> &lt;<span class="nt">--</span> shell 형식
RUN <span class="o">[</span><span class="s2">"echo"</span>, <span class="s2">"Exec: Home Dir --&gt; </span><span class="nv">$HOME</span><span class="s2">"</span> <span class="o">]</span> &lt;<span class="nt">--</span> <span class="nb">exec </span>형식
RUN <span class="o">[</span><span class="s2">"/bin/bash"</span> , <span class="s2">"-c"</span>, <span class="s2">"echo Exec: Home Dir : </span><span class="nv">$HOME</span><span class="s2">"</span> <span class="o">]</span> &lt;<span class="nt">--</span> <span class="nb">exec </span>형식

root@docker1:~/labfile/dockerfile_dir# docker build <span class="nt">-t</span> echo00 <span class="nt">-f</span> Dockerfile.2 <span class="nb">.</span>
Sending build context to Docker daemon  176.1kB
Step 1/4 : FROM ubuntu
 <span class="nt">---</span><span class="o">&gt;</span> 6b7dfa7e8fdb
Step 2/4 : RUN <span class="nb">echo</span> <span class="s2">"Shell: Home Dir --&gt;  </span><span class="nv">$HOME</span><span class="s2"> "</span>
 <span class="nt">---</span><span class="o">&gt;</span> Running <span class="k">in </span>89fcdd57095c

 // shell 형식
Shell: Home Dir <span class="nt">--</span><span class="o">&gt;</span>  /root
Removing intermediate container 89fcdd57095c
 <span class="nt">---</span><span class="o">&gt;</span> 959d899d68ac
Step 3/4 : RUN <span class="o">[</span><span class="s2">"echo"</span>, <span class="s2">"Exec: Home Dir --&gt; </span><span class="nv">$HOME</span><span class="s2">"</span> <span class="o">]</span>
 <span class="nt">---</span><span class="o">&gt;</span> Running <span class="k">in </span>9e24500dcd29
 // <span class="nb">exec </span>형식
Exec: Home Dir <span class="nt">--</span><span class="o">&gt;</span> <span class="nv">$HOME</span>
Removing intermediate container 9e24500dcd29
 <span class="nt">---</span><span class="o">&gt;</span> 543426d48390
Step 4/4 : RUN <span class="o">[</span><span class="s2">"/bin/bash"</span> , <span class="s2">"-c"</span>, <span class="s2">"echo Exec: Home Dir : </span><span class="nv">$HOME</span><span class="s2">"</span> <span class="o">]</span>
 <span class="nt">---</span><span class="o">&gt;</span> Running <span class="k">in </span>29afed36471a
 // <span class="nb">exec </span>형식
Exec: Home Dir : /root
Removing intermediate container 29afed36471a
 <span class="nt">---</span><span class="o">&gt;</span> 803e2dcf0ab0
Successfully built 803e2dcf0ab0
Successfully tagged echo00:latest
root@docker1:~/labfile/dockerfile_dir#

// 이미지 생성 확인
root@docker1:~/labfile/dockerfile_dir# docker image <span class="nb">ls
</span>REPOSITORY          TAG       IMAGE ID       CREATED          SIZE
echo00              latest    803e2dcf0ab0   5 minutes ago    77.8MB
</code></pre></div></div><h3 id="cmd"> <a href="#cmd" class="anchor-heading" aria-labelledby="cmd"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> CMD</h3><p>컨테이너 내부에서 수행될 작업이나 명령 즉, 컨테이너가 시작될 때 실행되는 프로그램을 정의한다. <code class="language-plaintext highlighter-rouge">Dockerfile</code> 하나에 하나의 <code class="language-plaintext highlighter-rouge">CMD</code> 만 기술해야 한다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@docker1:~/labfile/dockerfile_dir# <span class="nb">cat </span>Dockerfile.1
FROM ubuntu
RUN  apt-get update <span class="o">&amp;&amp;</span> apt-get <span class="nb">install</span> <span class="nt">-y</span> <span class="nt">-q</span> nginx
COPY index.html /var/www/html/
CMD <span class="o">[</span><span class="s2">"nginx"</span>, <span class="s2">"-g"</span>, <span class="s2">"daemon off;"</span><span class="o">]</span>
</code></pre></div></div><blockquote><p>RUN 과 혼동스럽긴 한데 아래 예제로 체크해 보자.<br /> Nginx 설치 시는 <code class="language-plaintext highlighter-rouge">RUN</code>, Nginx 데몬 실행 시는 <code class="language-plaintext highlighter-rouge">CMD</code></p></blockquote><h3 id="entrypoint"> <a href="#entrypoint" class="anchor-heading" aria-labelledby="entrypoint"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ENTRYPOINT</h3><p>컨테이너가 시작될 때 실행할 작업이다. <code class="language-plaintext highlighter-rouge">CMD</code> 와 같이 사용되면 <code class="language-plaintext highlighter-rouge">CMD</code> 는 <code class="language-plaintext highlighter-rouge">ENTRYPOINT</code> 의 인수 형태로 먼저 해석된다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// ENTRYPOINT 와 CMD 같이 정의됨.
root@docker1:~/labfile/dockerfile_dir# <span class="nb">cat </span>Dockerfile.3
FROM centos
ENTRYPOINT <span class="o">[</span><span class="s2">"/bin/ping"</span>, <span class="s2">"localhost"</span><span class="o">]</span>
CMD <span class="o">[</span><span class="s2">"-c"</span>, <span class="s2">"3"</span><span class="o">]</span>

root@docker1:~/labfile/dockerfile_dir#

// ping00 이미지 생성
root@docker1:~/labfile/dockerfile_dir# docker build <span class="nt">-t</span> ping00 <span class="nt">-f</span> Dockerfile.3 <span class="nb">.</span>
Sending build context to Docker daemon  176.1kB
Step 1/3 : FROM centos
latest: Pulling from library/centos
a1d0c7532777: Pull <span class="nb">complete
</span>Digest: sha256:a27fd8080b517143cbbbab9dfb7c8571c40d67d534bbdee55bd6c473f432b177
Status: Downloaded newer image <span class="k">for </span>centos:latest
 <span class="nt">---</span><span class="o">&gt;</span> 5d0da3dc9764
Step 2/3 : ENTRYPOINT <span class="o">[</span><span class="s2">"/bin/ping"</span>, <span class="s2">"localhost"</span><span class="o">]</span>
 <span class="nt">---</span><span class="o">&gt;</span> Running <span class="k">in </span>50ce39c4451e
Removing intermediate container 50ce39c4451e
 <span class="nt">---</span><span class="o">&gt;</span> 5075db00e5d5
Step 3/3 : CMD <span class="o">[</span><span class="s2">"-c"</span>, <span class="s2">"3"</span><span class="o">]</span>
 <span class="nt">---</span><span class="o">&gt;</span> Running <span class="k">in </span>8357b97afb7d
Removing intermediate container 8357b97afb7d
 <span class="nt">---</span><span class="o">&gt;</span> 02259b638b70
Successfully built 02259b638b70
Successfully tagged ping00:latest
root@docker1:~/labfile/dockerfile_dir#
root@docker1:~/labfile/dockerfile_dir# docker image <span class="nb">ls
</span>REPOSITORY   TAG       IMAGE ID       CREATED         SIZE
ping00       latest    02259b638b70   2 minutes ago   231MB
centos       latest    5d0da3dc9764   16 months ago   231MB
root@docker1:~/labfile/dockerfile_dir#

// CMD <span class="o">[</span><span class="s2">"-c"</span>, <span class="s2">"3"</span><span class="o">]</span> 에 의해 3번 PING 실행
root@docker1:~/labfile/dockerfile_dir# docker run <span class="nt">-it</span> ping00
PING localhost <span class="o">(</span>127.0.0.1<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
64 bytes from localhost <span class="o">(</span>127.0.0.1<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span>1 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.023 ms
64 bytes from localhost <span class="o">(</span>127.0.0.1<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span>2 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.036 ms
64 bytes from localhost <span class="o">(</span>127.0.0.1<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span>3 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.040 ms

<span class="nt">---</span> localhost ping statistics <span class="nt">---</span>
3 packets transmitted, 3 received, 0% packet loss, <span class="nb">time </span>2040ms
rtt min/avg/max/mdev <span class="o">=</span> 0.023/0.033/0.040/0.007 ms
root@docker1:~/labfile/dockerfile_dir#
root@docker1:~/labfile/dockerfile_dir#

// 인자 넣어주면 CMD 무시됨.
root@docker1:~/labfile/dockerfile_dir# docker run <span class="nt">-it</span> ping00 <span class="nt">-c</span> 5
PING localhost <span class="o">(</span>127.0.0.1<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
64 bytes from localhost <span class="o">(</span>127.0.0.1<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span>1 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.050 ms
64 bytes from localhost <span class="o">(</span>127.0.0.1<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span>2 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.025 ms
64 bytes from localhost <span class="o">(</span>127.0.0.1<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span>3 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.048 ms
64 bytes from localhost <span class="o">(</span>127.0.0.1<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span>4 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.079 ms
64 bytes from localhost <span class="o">(</span>127.0.0.1<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span>5 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.031 ms

<span class="nt">---</span> localhost ping statistics <span class="nt">---</span>
5 packets transmitted, 5 received, 0% packet loss, <span class="nb">time </span>4097ms
rtt min/avg/max/mdev <span class="o">=</span> 0.025/0.046/0.079/0.020 ms
root@docker1:~/labfile/dockerfile_dir#
root@docker1:~/labfile/dockerfile_dir#
root@docker1:~/labfile/dockerfile_dir#

// 원본 이미지 centos 는 아래와 같다.

root@docker1:~/labfile/dockerfile_dir# docker image inspect centos
<span class="o">[</span>
    <span class="o">{</span>
        <span class="s2">"Id"</span>: <span class="s2">"sha256:5d0da3dc976460b72c77d94c8a1ad043720b0416bfc16c52c45d4847e53fadb6"</span>, 
            <span class="s2">"Cmd"</span>: <span class="o">[</span>
                <span class="s2">"/bin/sh"</span>,
                <span class="s2">"-c"</span>,
                <span class="s2">"#(nop) "</span>,
                <span class="s2">"CMD [</span><span class="se">\"</span><span class="s2">/bin/bash</span><span class="se">\"</span><span class="s2">]"</span>
            <span class="o">]</span>,

            <span class="s2">"Entrypoint"</span>: null,

// ping00 은 아래와 같다.
 root@docker1:~/labfile/dockerfile_dir# docker image inspect ping00
<span class="o">[</span>
    <span class="o">{</span>
        <span class="s2">"Id"</span>: <span class="s2">"sha256:02259b638b7070d3cb7a082fc6274e991fe5ab8ad371c03409f77b0c149c5ec7"</span>,

            <span class="s2">"Cmd"</span>: <span class="o">[</span>
                <span class="s2">"/bin/sh"</span>,
                <span class="s2">"-c"</span>,
                <span class="s2">"#(nop) "</span>,
                <span class="s2">"CMD [</span><span class="se">\"</span><span class="s2">-c</span><span class="se">\"</span><span class="s2"> </span><span class="se">\"</span><span class="s2">3</span><span class="se">\"</span><span class="s2">]"</span>
            <span class="o">]</span>,

            <span class="s2">"Entrypoint"</span>: <span class="o">[</span>
                <span class="s2">"/bin/ping"</span>,
                <span class="s2">"localhost"</span>
            <span class="o">]</span>,
</code></pre></div></div><h3 id="env"> <a href="#env" class="anchor-heading" aria-labelledby="env"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ENV</h3><p>Dockerfile 안에서 컨테이너 환경 변수를 설정한다. 예로서 웹에서 DB정보 연결할 때 사용한다. 자주 사용되는 키워드이다.</p><h3 id="label"> <a href="#label" class="anchor-heading" aria-labelledby="label"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> LABEL</h3><p>이미지에 대한 부가적인 설명을 제공한다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// 도커파일 정의
root@docker1:~/labfile/dockerfile_dir# <span class="nb">cat </span>Dockerfile.4
FROM centos

ENV myName “Yu Mi”
ENV myOrder Pizza Pasta Salad
ENV myNumber 1004

LABEL maintainer <span class="s2">"Yu Mi &lt;yumi@example.com&gt;"</span>
LABEL title <span class="s2">"TEST Image"</span>
LABEL version 1.0
LABEL description <span class="s2">"This image is test image ^__^"</span>

// 이미지 빌드
root@docker1:~/labfile/dockerfile_dir# docker build <span class="nt">-t</span> param00 <span class="nt">-f</span> Dockerfile.4 <span class="nb">.</span>
Sending build context to Docker daemon  176.1kB
Step 1/8 : FROM centos
latest: Pulling from library/centos
.. 중략
Successfully built e7bf5be9766f
Successfully tagged param00:latest
root@docker1:~/labfile/dockerfile_dir#
root@docker1:~/labfile/dockerfile_dir#
root@docker1:~/labfile/dockerfile_dir# docker image inspect param00
<span class="o">[</span>
    <span class="o">{</span>
        <span class="s2">"Id"</span>: <span class="s2">"sha256:e7bf5be9766f77b2bf1d9536aead63c6bd528ad9466bbcb257625c641b93ab51"</span>,
       ... 중략
        <span class="s2">"ContainerConfig"</span>: <span class="o">{</span>

            <span class="s2">"Env"</span>: <span class="o">[</span>
                <span class="s2">"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"</span>,
                <span class="s2">"myName=“Yu Mi”"</span>,
                <span class="s2">"myOrder=Pizza Pasta Salad"</span>,
                <span class="s2">"myNumber=1004"</span>
            <span class="o">]</span>,
      ... 중략
            <span class="s2">"Labels"</span>: <span class="o">{</span>
                <span class="s2">"description"</span>: <span class="s2">"This image is test image ^__^"</span>,
                <span class="s2">"maintainer"</span>: <span class="s2">"Yu Mi &lt;yumi@example.com&gt;"</span>,
                <span class="s2">"org.label-schema.build-date"</span>: <span class="s2">"20210915"</span>,
                <span class="s2">"org.label-schema.license"</span>: <span class="s2">"GPLv2"</span>,
                <span class="s2">"org.label-schema.name"</span>: <span class="s2">"CentOS Base Image"</span>,
                <span class="s2">"org.label-schema.schema-version"</span>: <span class="s2">"1.0"</span>,
                <span class="s2">"org.label-schema.vendor"</span>: <span class="s2">"CentOS"</span>,
                <span class="s2">"title"</span>: <span class="s2">"TEST Image"</span>,
                <span class="s2">"version"</span>: <span class="s2">"1.0"</span>
            <span class="o">}</span>
        <span class="o">}</span>,

</code></pre></div></div><p>컨테이너 안에서 환경변수를 확인해 보자.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// param00 컨테이너 실행
root@docker1:~/labfile/dockerfile_dir# docker run <span class="nt">-it</span> <span class="nt">--rm</span> param00
<span class="o">[</span>root@4a5fa49b48bc /]# <span class="nb">echo</span> <span class="nv">$myName</span> : <span class="nv">$myOrder</span> : <span class="nv">$myNumber</span>
“Yu Mi” : Pizza Pasta Salad : 1004
<span class="o">[</span>root@4a5fa49b48bc /]#
<span class="o">[</span>root@4a5fa49b48bc /]# <span class="nb">exit
exit</span>

// <span class="nt">--env</span> 로 컨테이너 생성 시 정의
root@docker1:~/labfile/dockerfile_dir# docker run <span class="nt">-it</span> <span class="nt">--env</span> <span class="nv">myAge</span><span class="o">=</span>20 <span class="nt">--env</span> <span class="nv">myNumber</span><span class="o">=</span>1005 param00
<span class="o">[</span>root@1b02c26cfcd8 /]#  <span class="nb">echo</span> <span class="nv">$myAge</span>
20
<span class="o">[</span>root@1b02c26cfcd8 /]# <span class="nb">echo</span> <span class="nv">$myNumber</span>
1005
<span class="o">[</span>root@1b02c26cfcd8 /]# <span class="nb">env
</span><span class="nv">myName</span><span class="o">=</span>“Yu Mi”
<span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8
<span class="nv">HOSTNAME</span><span class="o">=</span>1b02c26cfcd8
<span class="nv">PWD</span><span class="o">=</span>/
<span class="nv">HOME</span><span class="o">=</span>/root
<span class="nv">myOrder</span><span class="o">=</span>Pizza Pasta Salad
<span class="nv">myAge</span><span class="o">=</span>20
<span class="nv">TERM</span><span class="o">=</span>xterm
<span class="nv">SHLVL</span><span class="o">=</span>1
<span class="nv">myNumber</span><span class="o">=</span>1005
<span class="nv">PATH</span><span class="o">=</span>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
<span class="nv">LESSOPEN</span><span class="o">=||</span>/usr/bin/lesspipe.sh %s
<span class="nv">_</span><span class="o">=</span>/usr/bin/env
<span class="o">[</span>root@1b02c26cfcd8 /]#
<span class="o">[</span>root@1b02c26cfcd8 /]# <span class="nb">exit
exit
</span>root@docker1:~/labfile/dockerfile_dir#
</code></pre></div></div><h3 id="add--copy"> <a href="#add--copy" class="anchor-heading" aria-labelledby="add--copy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ADD , COPY</h3><p><code class="language-plaintext highlighter-rouge">ADD</code>와 <code class="language-plaintext highlighter-rouge">COPY</code>는 특정 위치에서 Docker 이미지로 파일을 복사하는 기능을 수행하는 Dockerfile 명령어이다.<br /> <code class="language-plaintext highlighter-rouge">COPY</code>는 로컬 파일 또는 디렉토리를 컨테이너에 복사하는 기능만 지원한다.<br /> <code class="language-plaintext highlighter-rouge">ADD</code>도 해당 기능을 지원하지만, 2개의 또다른 기능도 지원한다.<br /> 먼저, 로컬 파일 또는 디렉토리 대신 URL을 사용할 수 있다.<br /> 두번째로는 ADD rootfs.tar.xz /처럼 소스에서 대상으로 직접 tar파일을 자동 추출할 수 있다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// ADD, COPY 정의
root@docker1:~/labfile/dockerfile_dir# <span class="nb">cat </span>Dockerfile.5
FROM ubuntu
ADD  host.html  /test_dir/add.html
COPY host.html  /test_dir/copy.html
ADD  https://github.com/kubernetes/kubernetes/blob/master/LICENSE /test_dir/
ADD  add_data.tgz /test_dir/
COPY copy_data.tgz /test_dir/
root@docker1:~/labfile/dockerfile_dir#
root@docker1:~/labfile/dockerfile_dir#

// 압축 파일 해제
root@docker1:~/labfile/dockerfile_dir# <span class="nb">tar</span> <span class="nt">-tzvf</span> add_data.tgz
<span class="nt">-rw-r--r--</span> root/root        20 2022-04-26 12:08 add_1.html
<span class="nt">-rw-r--r--</span> root/root        20 2022-04-26 12:08 add_2.html
<span class="nt">-rw-r--r--</span> root/root        20 2022-04-26 12:09 add_3.html
root@docker1:~/labfile/dockerfile_dir#
root@docker1:~/labfile/dockerfile_dir#
root@docker1:~/labfile/dockerfile_dir# <span class="nb">tar</span> <span class="nt">-tzvf</span> copy_data.tgz
<span class="nt">-rw-r--r--</span> root/root        20 2022-04-26 12:09 copy_1.html
<span class="nt">-rw-r--r--</span> root/root        20 2022-04-26 12:09 copy_2.html
<span class="nt">-rw-r--r--</span> root/root        20 2022-04-26 12:09 copy_3.html
root@docker1:~/labfile/dockerfile_dir#
root@docker1:~/labfile/dockerfile_dir#
root@docker1:~/labfile/dockerfile_dir# <span class="nb">ls
</span>add_data.tgz   Dockerfile    Dockerfile.11  Dockerfile.3  Dockerfile.5  host.html
copy_data.tgz  Dockerfile.1  Dockerfile.2   Dockerfile.4  Dockerfile.6  index.html
root@docker1:~/labfile/dockerfile_dir#

// file00 이미지 생성
root@docker1:~/labfile/dockerfile_dir# docker build <span class="nt">-t</span> file00 <span class="nt">-f</span> Dockerfile.5 <span class="nb">.</span>
Sending build context to Docker daemon  176.1kB
Step 1/6 : FROM ubuntu
latest: Pulling from library/ubuntu
6e3729cf69e0: Pull <span class="nb">complete
</span>Digest: sha256:27cb6e6ccef575a4698b66f5de06c7ecd61589132d5a91d098f7f3f9285415a9
Status: Downloaded newer image <span class="k">for </span>ubuntu:latest
 <span class="nt">---</span><span class="o">&gt;</span> 6b7dfa7e8fdb
Step 2/6 : ADD  host.html  /test_dir/add.html
 <span class="nt">---</span><span class="o">&gt;</span> a9ad95733e3c
Step 3/6 : COPY host.html  /test_dir/copy.html
 <span class="nt">---</span><span class="o">&gt;</span> f5909d2eaad6
Step 4/6 : ADD  https://github.com/kubernetes/kubernetes/blob/master/LICENSE /test_dir/
Downloading  210.3kB

 <span class="nt">---</span><span class="o">&gt;</span> 48bbcf3a8eb9
Step 5/6 : ADD  add_data.tgz /test_dir/
 <span class="nt">---</span><span class="o">&gt;</span> b19bf7d0d6c5
Step 6/6 : COPY copy_data.tgz /test_dir/
 <span class="nt">---</span><span class="o">&gt;</span> 5a0fa506014b
Successfully built 5a0fa506014b
Successfully tagged file00:latest
root@docker1:~/labfile/dockerfile_dir# docker build <span class="nt">-t</span> file00 <span class="nt">-f</span> Dockerfile.5 .^C

// file00 이미지로 컨테이너 생성
root@docker1:~/labfile/dockerfile_dir# docker run <span class="nt">-it</span> <span class="nt">--rm</span> file00

// 컨테이너 내 COPY, ADD 파일 존재 확인
root@aa9154bcce3c:/# <span class="nb">ls</span> <span class="nt">-l</span> /test_dir/
total 544
<span class="nt">-rw-------</span> 1 root root 210306 Jan  1  1970 LICENSE
<span class="nt">-rw-r--r--</span> 1 root root 163112 Jan 10 14:09 add.html
<span class="nt">-rw-r--r--</span> 1 root root     20 Apr 26  2022 add_1.html
<span class="nt">-rw-r--r--</span> 1 root root     20 Apr 26  2022 add_2.html
<span class="nt">-rw-r--r--</span> 1 root root     20 Apr 26  2022 add_3.html
<span class="nt">-rw-r--r--</span> 1 root root 163112 Jan 10 14:09 copy.html
<span class="nt">-rw-r--r--</span> 1 root root    182 Jan 10 14:09 copy_data.tgz
</code></pre></div></div><h3 id="expose"> <a href="#expose" class="anchor-heading" aria-labelledby="expose"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> EXPOSE</h3><p>컨테이너의 <code class="language-plaintext highlighter-rouge">공개 포트</code> 를 지정하여 도커에게 컨테이너가 대기하고 있는 포트를 알려준다.<br /> <code class="language-plaintext highlighter-rouge">docker run</code> 명령어의 <code class="language-plaintext highlighter-rouge">-p</code> 옵션을 통해 호스트의 포트 번호와 매핑할 수 있다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// EXPOSE 선언
root@docker1:~/labfile/dockerfile_dir# <span class="nb">cat </span>Dockerfile.6
FROM nginx
EXPOSE 443
root@docker1:~/labfile/dockerfile_dir#

// 이미지 빌드
root@docker1:~/labfile/dockerfile_dir# docker build <span class="nt">-t</span> port00 <span class="nt">-f</span> Dockerfile.6 <span class="nb">.</span>
Sending build context to Docker daemon  186.9kB
Step 1/2 : FROM nginx
latest: Pulling from library/nginx
.. 중략
Successfully tagged port00:latest
root@docker1:~/labfile/dockerfile_dir#

// 컨테이너 생성
root@docker1:~/labfile/dockerfile_dir# docker run <span class="nt">-d</span> <span class="nt">-p</span> 8080:443 port00
878484cba54d9b332ad27177f5739bb3263018118ed357ea0e7a9627a15ea110
root@docker1:~/labfile/dockerfile_dir#

// 8080-&gt;443 확인
root@docker1:~/labfile/dockerfile_dir# docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                                                NAMES
878484cba54d   port00    <span class="s2">"/docker-entrypoint.…"</span>   7 seconds ago   Up 6 seconds   80/tcp, 0.0.0   .0:8080-&gt;443/tcp, :::8080-&gt;443/tcp   mystifying_merkle
root@docker1:~/labfile/dockerfile_dir#
root@docker1:~/labfile/dockerfile_dir# docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                     NAMES
878484cba54d   port00    <span class="s2">"/docker-entrypoint.…"</span>   17 seconds ago   Up 15 seconds   80/tcp, 0.0.0.-&gt;443/tcp   mystifying_merkle
root@docker1:~/labfile/dockerfile_dir# docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                                             NAMES
878484cba54d   port00    <span class="s2">"/docker-entrypoint.…"</span>   23 seconds ago   Up 22 seconds   80/tcp, 0.0.0.0:8080-&gt;443/tcp, :::8080-&gt;443/tcp   mystifying_merkle
root@docker1:~/labfile/dockerfile_dir#
</code></pre></div></div></main><hr><footer><p><a href="#top" id="back-to-top">Back to top</a></p><p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2023 dmjgr5. Distributed by an <a href="https://github.com/dmjgr5/dmjgr5.github.io/blob/main/LICENSE.txt">MIT license.</a> <a href="https://www.netlify.com/">This site is powered by Netlify.</a></p><div class="d-flex mt-2"><p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/dmjgr5/dmjgr5.github.io/tree/main/docs/cloud/docker-dockerfile.md" id="edit-this-page">Edit this page on GitHub</a></p></div></footer></div></div><div class="search-overlay"></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script>
